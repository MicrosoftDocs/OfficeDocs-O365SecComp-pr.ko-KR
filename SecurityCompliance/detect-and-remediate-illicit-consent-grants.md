---
title: Office 365에서 불법 동의 권한 부여 검색 및 교정
ms.author: chrfox
author: chrfox
manager: laurawi
ms.date: 4/23/2018
ms.audience: ITPro
ms.topic: article
ms.collection:
- o365_security_incident_response
- M365-security-compliance
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
description: Office 365에서 불법 동의 부여 공격을 인식 하 고 수정 하는 방법에 대해 알아봅니다.
ms.openlocfilehash: 658183b3e5a3089425312ee14c6663485e0543ce
ms.sourcegitcommit: e23b84ef4eee9cccec7205826b71ddfe9aaac2f8
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/28/2019
ms.locfileid: "33402956"
---
# <a name="detect-and-remediate-illicit-consent-grants-in-office-365"></a><span data-ttu-id="e3cbd-103">Office 365에서 불법 동의 권한 부여 검색 및 교정</span><span class="sxs-lookup"><span data-stu-id="e3cbd-103">Detect and Remediate Illicit Consent Grants in Office 365</span></span>

<span data-ttu-id="e3cbd-104">**요약**  Office 365에서 불법 동의 부여 공격을 인식 하 고 수정 하는 방법에 대해 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-104">**Summary**  Learn how to recognize and remediate the illicit consent grants attack in Office 365.</span></span>

## <a name="what-is-the-illicit-consent-grant-attack-in-office-365"></a><span data-ttu-id="e3cbd-105">Office 365의 불법 동의 허용 이란?</span><span class="sxs-lookup"><span data-stu-id="e3cbd-105">What is the illicit consent grant attack in Office 365?</span></span>
<span data-ttu-id="e3cbd-106">공격자는 불법 공격을 허용 하 여 연락처 정보, 전자 메일 또는 문서 등의 데이터에 대 한 액세스를 요청 하는 Azure 등록 응용 프로그램을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-106">In an illicit consent grant attack, the attacker creates an Azure-registered application that requests access to data such as contact information, email, or documents.</span></span> <span data-ttu-id="e3cbd-107">그런 다음 공격자는 최종 사용자에 게 피싱 공격을 통해 데이터에 대 한 액세스를 허용 하거나 신뢰할 수 있는 웹 사이트에 불법 코드를 삽입 하는 방법으로 응용 프로그램에 동의 하도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-107">The attacker then tricks an end user into granting that application consent to access their data either through a phishing attack, or by injecting illicit code into a trusted website.</span></span> <span data-ttu-id="e3cbd-108">불법 응용 프로그램에 동의 하면 조직 계정 없이도 데이터에 대 한 계정 수준의 액세스 권한이 부여 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-108">After the illicit application has been granted consent, it has account-level access to data without the need for an organizational account.</span></span> <span data-ttu-id="e3cbd-109">계정에 대 한 암호를 다시 설정 하거나 문제에 대 한 다단계 인증 (MFA)을 요청 하는 등의 일반 재구성 단계는 타사 응용 프로그램 이며 조직 외부에 있는 경우에는 이러한 유형의 공격에는 효과적이 지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-109">Normal remediation steps, like resetting passwords for breached accounts or requiring Multi-Factor Authentication (MFA) on accounts, are not effective against this type of attack, since these are third-party applications and are external to the organization.</span></span> <span data-ttu-id="e3cbd-110">이러한 공격은 정보를 호출 하는 엔터티가 사람이 아니라 자동화 인 것으로 가정 하는 상호 작용 모델을 활용 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-110">These attacks leverage an interaction model which presumes the entity that is calling the information is automation and not a human.</span></span>

## <a name="what-does-an-illicit-consent-grant-attack-look-like-in-office-365"></a><span data-ttu-id="e3cbd-111">불법 동의는 Office 365에서 공격을 허용 하는 것과 유사 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-111">What does an illicit consent grant attack look like in Office 365?</span></span>
<span data-ttu-id="e3cbd-112">Office 365 **감사 로그** 를 검색 하 여이 공격의 손상 (IOC) 라고도 하는 서명을 확인 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-112">You need to search the Office 365 **audit log** to find signs, also called Indicators of Compromise (IOC) of this attack.</span></span> <span data-ttu-id="e3cbd-113">많은 Azure 등록 응용 프로그램 및 대규모 사용자 기반 조직의 경우에는 조직에서 주 단위로 승인 권한을 검토 하는 것이 가장 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-113">For organizations with many Azure-registered applications and a large user base, the best practice is to review your organizations consent grants on a weekly basis.</span></span>
### <a name="steps-for-finding-signs-of-this-attack"></a><span data-ttu-id="e3cbd-114">이 공격의 신호를 찾는 단계</span><span class="sxs-lookup"><span data-stu-id="e3cbd-114">Steps for finding signs of this attack</span></span>
1. <span data-ttu-id="e3cbd-115">Office 365 테 넌 트에서 **보안 및 준수 센터** 를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-115">Open the **Security and Compliance Center** in your Office 365 tenant.</span></span>
2. <span data-ttu-id="e3cbd-116">**검색 & 조사** 노드로 이동 하 고 **감사 로그** 검색을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-116">Navigate to the **Search & investigation** node and select **audit log** search.</span></span>
3. <span data-ttu-id="e3cbd-117">검색 (모든 작업 및 모든 사용자)을 만들고, 응용 프로그램에 대 한 승인 결과를 필터링 하 고, OAuth2PermissionGrant를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-117">Create a search (all activities and all users) and filter the results for Consent to application, and Add OAuth2PermissionGrant.</span></span>
4. <span data-ttu-id="e3cbd-118">확장 속성을 검사 하 고 isadmincontent가 True로 설정 되어 있는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-118">Examine the Extended Properties and check to see if IsAdminContent is set to True.</span></span>

> [!NOTE]
>  
   - <span data-ttu-id="e3cbd-119">해당 감사 로그 항목이 검색 결과에 표시 될 때까지 이벤트가 발생 한 후 최대 30 분 이나 최대 24 시간이 걸릴 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-119">It can take up to 30 minutes or up to 24 hours after an event occurs for the corresponding audit log entry to be displayed in the search results.</span></span>
   - <span data-ttu-id="e3cbd-120">감사 레코드가 보존 되 고 검색 가능 하 게 되는 기간은 Office 365 구독에 따라 다르며, 특히 특정 사용자에 게 할당 된 라이선스의 유형입니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-120">The length of time that an audit record is retained and searchable in the audit log depends on your Office 365 subscription, and specifically the type of the license that is assigned to a specific user.</span></span> <span data-ttu-id="e3cbd-121">자세한 내용은 [감사 로그](search-the-audit-log-in-security-and-compliance.md)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-121">For more information, see [Audit log](search-the-audit-log-in-security-and-compliance.md).</span></span>
      
<span data-ttu-id="e3cbd-122">이 값이 true 이면 전역 관리자 액세스 권한이 있는 사용자가 데이터에 광범위 하 게 액세스할 수 있음을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-122">If this value is true, it indicates that someone with Global Administrator access may have granted broad access to data.</span></span> <span data-ttu-id="e3cbd-123">예기치 않은 경우 [공격을 확인](detect-and-remediate-illicit-consent-grants.md#confirmattack)하기 위한 단계를 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-123">If this is unexpected, take steps to [confirm an attack](detect-and-remediate-illicit-consent-grants.md#confirmattack).</span></span>

<span data-ttu-id="e3cbd-124"><a name="confirmattack"> </a></span><span class="sxs-lookup"><span data-stu-id="e3cbd-124"></span></span>
## <a name="how-to-confirm-an-attack"></a><span data-ttu-id="e3cbd-125">공격을 확인 하는 방법</span><span class="sxs-lookup"><span data-stu-id="e3cbd-125">How to confirm an attack</span></span>
<span data-ttu-id="e3cbd-126">위에 나열 된 iocs의 인스턴스가 하나 이상 있으면 공격이 발생 한 것을 확실 하 게 확인 하려면 추가 조사를 수행 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-126">If you have one or more instances of the IOCs  listed above, you need to do further investigation to positively confirm that the attack occurred.</span></span> <span data-ttu-id="e3cbd-127">이러한 세 가지 방법 중 하나를 사용 하 여 공격을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-127">You can use any of these three methods to confirm the attack.</span></span>
- <span data-ttu-id="e3cbd-128">Azure Active Directory 포털을 사용 하는 인벤토리 응용 프로그램 및 사용 권한</span><span class="sxs-lookup"><span data-stu-id="e3cbd-128">Inventory applications and their permissions using the Azure Active Directory portal.</span></span> <span data-ttu-id="e3cbd-129">이 방법은 완벽 하지만 확인할 사용자가 많은 경우에는 한 번에 한 명의 사용자만 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-129">This method is thorough, but you can only check one user at a time which can be very time consuming if you have many users to check.</span></span>
- <span data-ttu-id="e3cbd-130">PowerShell을 사용 하는 인벤토리 응용 프로그램 및 권한</span><span class="sxs-lookup"><span data-stu-id="e3cbd-130">Inventory  applications and their permissions using PowerShell.</span></span> <span data-ttu-id="e3cbd-131">오버 헤드가 가장 빠르고 대부분의 완벽 한 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-131">This is the fastest and most thorough method, with the least amount of overhead.</span></span>
- <span data-ttu-id="e3cbd-132">사용자가 자신의 앱 및 사용 권한을 개별적으로 확인 하 고 재구성을 위해 관리자에 게 결과를 다시 보고 하도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-132">Have your users individually check their apps and permissions and report the results back to the administrators for remediation.</span></span>

## <a name="inventory-apps-with-access-in-your-organization"></a><span data-ttu-id="e3cbd-133">조직에 대 한 액세스 권한이 있는 인벤토리 앱</span><span class="sxs-lookup"><span data-stu-id="e3cbd-133">Inventory apps with access in your organization</span></span>
<span data-ttu-id="e3cbd-134">Azure Active Directory Portal 또는 PowerShell을 사용 하 여 사용자에 게이 작업을 수행 하거나 사용자가 응용 프로그램 액세스를 개별적으로 열거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-134">You can do this for your users with either the Azure Active Directory Portal, or PowerShell or have your users individually enumerate their application access.</span></span>

### <a name="steps-for-using-the-azure-active-directory-portal"></a><span data-ttu-id="e3cbd-135">Azure Active Directory 포털을 사용 하기 위한 단계</span><span class="sxs-lookup"><span data-stu-id="e3cbd-135">Steps for using the Azure Active Directory Portal</span></span>
<span data-ttu-id="e3cbd-136">[Azure Active Directory 포털](https://portal.azure.com/)을 사용 하 여 개별 사용자가 사용 권한을 부여한 응용 프로그램을 조회할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-136">You can look up the applications to which any individual user has granted permissions by using the [Azure Active Directory Portal](https://portal.azure.com/).</span></span> 
1. <span data-ttu-id="e3cbd-137">관리 권한을 사용 하 여 Azure Portal에 로그인 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-137">Sign in to the Azure Portal with administrative rights.</span></span>
2. <span data-ttu-id="e3cbd-138">Azure Active Directory 블레이드를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-138">Select the Azure Active Directory blade.</span></span>
3. <span data-ttu-id="e3cbd-139">**사용자**를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-139">Select **Users**.</span></span>
4. <span data-ttu-id="e3cbd-140">검토할 사용자를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-140">Select the user that you want to review.</span></span>
5. <span data-ttu-id="e3cbd-141">**응용 프로그램**을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-141">Select **Applications**.</span></span>

<span data-ttu-id="e3cbd-142">여기에는 사용자에 게 할당 된 앱과 applcations에 게 부여 되는 사용 권한이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-142">This will show you the apps that are assigned to the user and what permissions the applcations have.</span></span>

### <a name="steps-for-having-your-users-enumerate-their-application-access"></a><span data-ttu-id="e3cbd-143">사용자에 게 응용 프로그램 액세스를 열거 하기 위한 단계</span><span class="sxs-lookup"><span data-stu-id="e3cbd-143">Steps for having your users enumerate their application access</span></span>
<span data-ttu-id="e3cbd-144">사용자가으로 이동 하 https://myapps.microsoft.com 여 해당 응용 프로그램에 대 한 액세스를 검토 하도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-144">Have your users go to https://myapps.microsoft.com and review their own application access there.</span></span> <span data-ttu-id="e3cbd-145">액세스 권한이 있는 모든 앱을 볼 수 있고, 액세스 범위를 포함 하 여이에 대 한 세부 정보를 보고, 의심 스러운 앱 또는 불법 응용 프로그램에 대 한 권한을 해지할 수 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-145">They should be able to see all the apps with access, view details about them (including the scope of access), and be able to revoke privileges to suspicious or illicit apps.</span></span>

### <a name="steps-for-doing-this-with-powershell"></a><span data-ttu-id="e3cbd-146">PowerShell에서이 작업을 수행 하기 위한 단계</span><span class="sxs-lookup"><span data-stu-id="e3cbd-146">Steps for doing this with PowerShell</span></span>
<span data-ttu-id="e3cbd-147">불법도를 확인 하는 가장 간단한 방법은 테 넌 트의 모든 사용자에 대 한 모든 oauth 승인 권한 부여 및 oauth 앱을 하나의 .csv 파일로 덤프 하는 Get-AzureADPSPermissions를 실행 하는 것입니다 [.](https://gist.github.com/psignoret/41793f8c6211d2df5051d77ca3728c09)</span><span class="sxs-lookup"><span data-stu-id="e3cbd-147">The simplest way to verify the Illicit Consent Grant attack is to run  [Get-AzureADPSPermissions.ps1](https://gist.github.com/psignoret/41793f8c6211d2df5051d77ca3728c09), which will dump all the OAuth consent grants and OAuth apps for all users in your tenancy into one .csv file.</span></span> 

#### <a name="pre-requisites"></a><span data-ttu-id="e3cbd-148">필수 구성 요소</span><span class="sxs-lookup"><span data-stu-id="e3cbd-148">Pre-requisites</span></span>
- <span data-ttu-id="e3cbd-149">Azure AD PowerShell 라이브러리가 설치 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-149">The Azure AD PowerShell library installed.</span></span>
- <span data-ttu-id="e3cbd-150">스크립트를 실행할 테 넌 트에 대 한 전역 관리자 권한</span><span class="sxs-lookup"><span data-stu-id="e3cbd-150">Global administrator rights on the tenant that the script will be run against.</span></span>
- <span data-ttu-id="e3cbd-151">스크립트를 실행 하는 컴퓨터의 로컬 관리자입니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-151">Local Administrator on the computer from which will run the scripts.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e3cbd-152">관리 계정에 대해 multi-factor authentication을 사용 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-152">We highly recommend that you require multi-factor authentication on your administrative account.</span></span>  <span data-ttu-id="e3cbd-153">이 스크립트는 MFA 인증을 지원 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-153">This script supports MFA authentication.</span></span>

1. <span data-ttu-id="e3cbd-154">로컬 관리자 권한이 있는 스크립트를 실행 하는 컴퓨터에 로그인 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-154">Sign in to the computer that you will run the script from with local administrator rights.</span></span>
2. <span data-ttu-id="e3cbd-155">GitHub에서 [Get-AzureADPSPermissions](https://gist.github.com/psignoret/41793f8c6211d2df5051d77ca3728c09) 스크립트를 다운로드 하거나 복사 하 여 scruipt를 실행 하는 데 사용할 폴더를 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-155">Download or copy the [Get-AzureADPSPermissions.ps1](https://gist.github.com/psignoret/41793f8c6211d2df5051d77ca3728c09) script from GitHub to a folder from which you will run the scruipt.</span></span>  <span data-ttu-id="e3cbd-156">이 폴더는 출력이 "permissions" 파일을 작성할 때 사용 하는 폴더가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-156">This will be the same folder to which the output “permissions.csv” file will be written.</span></span>
3. <span data-ttu-id="e3cbd-157">관리자로 PowerShell 인스턴스를 열고 스크립트를 저장 한 폴더로 엽니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-157">Open a PowerShell instance as an administrator and open to the folder you saved the script to.</span></span>
4. <span data-ttu-id="e3cbd-158">[AzureAD](https://docs.microsoft.com/powershell/module/azuread/connect-azuread?view=azureadps-2.0) cmdlet을 사용 하 여 디렉터리에 연결 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-158">Connect to your directory using the [Connect-AzureAD](https://docs.microsoft.com/powershell/module/azuread/connect-azuread?view=azureadps-2.0) cmdlet.</span></span>
5. <span data-ttu-id="e3cbd-159">이 PowerShell 명령줄을 다음과 같이 실행 합니다.`Get-AzureADPSPermissions.ps1 | Export-csv -path "Permissions.csv" -NoTypeInformation`</span><span class="sxs-lookup"><span data-stu-id="e3cbd-159">Run this PowerShell command line as follows: `Get-AzureADPSPermissions.ps1 | Export-csv -path "Permissions.csv" -NoTypeInformation`</span></span>

<span data-ttu-id="e3cbd-160">이 스크립트는 사용 권한 .csv 라는 파일 하나를 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-160">The script produces one file named Permissions.csv.</span></span> <span data-ttu-id="e3cbd-161">다음 단계에 따라 불법 응용 프로그램 권한 부여를 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-161">Follow these steps to look for illicit application permission grants:</span></span> 
1. <span data-ttu-id="e3cbd-162">ConsentType 열 (G 열)에서 "allprinciples" 값을 검색 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-162">In the ConsentType column (column G) search for the value “AllPrinciples”.</span></span> <span data-ttu-id="e3cbd-163">allprincipals 사용 권한을 사용 하면 클라이언트 응용 프로그램에서 테 넌 시의 모든 사용자 콘텐츠에 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-163">The AllPrincipals permission allows the client application to access everyone’s content in the tenancy.</span></span> <span data-ttu-id="e3cbd-164">네이티브 Office 365 응용 프로그램은 올바르게 작동 하려면이 권한이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-164">Native Office 365 applications need this permission to work correctly.</span></span> <span data-ttu-id="e3cbd-165">이 권한이 있는 Microsoft가 아닌 모든 응용 프로그램은 신중 하 게 검토 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-165">Every non-Microsoft application with this permission should be reviewed carefully.</span></span>
2.  <span data-ttu-id="e3cbd-166">사용 권한 열 (F 열)에서 각 위임 된 응용 프로그램의 콘텐츠에 적용 되는 사용 권한을 검토 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-166">In the Permission column (column F) review the permissions that each delegated application has to content.</span></span> <span data-ttu-id="e3cbd-167">"읽기" 및 "쓰기" 사용 권한 또는 "\*"를 찾습니다. All "사용 권한 및 적절 하지 않을 수 있으므로 신중 하 게 검토 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-167">Look for “Read” and “Write” permission or “\*.All” permission, and review these carefully because they may not be appropriate.</span></span>
3.  <span data-ttu-id="e3cbd-168">consents이 부여 된 특정 사용자를 검토 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-168">Review the specific users that have consents granted.</span></span> <span data-ttu-id="e3cbd-169">높은 프로필 또는 높은 영향을 가진 사용자에 게 부적절 한 consents 부여 된 경우 더 자세히 조사 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-169">If high profile or high impact users have inappropriate consents granted, you should investigate further.</span></span>
4.  <span data-ttu-id="e3cbd-170">clientdisplayname 열 (C 열)에서 의심 스러운 것으로 보이는 앱을 찾습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-170">In the ClientDisplayName column (column C) look for apps that seem suspicious.</span></span> <span data-ttu-id="e3cbd-171">이름이 철자가 잘못 된 앱, super bland name 또는 해커의 소리가 나 게 되는 이름은 신중 하 게 검토 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-171">Apps with misspelled names, super bland names, or hacker-sounding names should be reviewed carefully.</span></span>

## <a name="determine-the-scope-of-the-attack"></a><span data-ttu-id="e3cbd-172">공격 범위 결정</span><span class="sxs-lookup"><span data-stu-id="e3cbd-172">Determine the scope of the attack</span></span>
<span data-ttu-id="e3cbd-173">응용 프로그램 액세스 인벤토리를 완료 한 후에는 Office 365 **감사 로그** 를 검토 하 여 위반의 전체 범위를 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-173">After you have finished inventorying application access, review the Office 365 **audit log** to determine the full scope of the breach.</span></span>  <span data-ttu-id="e3cbd-174">영향을 받는 사용자, 불법 응용 프로그램에서 조직에 액세스 하는 데 사용 하는 기간 및 앱에 대 한 권한을 검색 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-174">Search on the affected users, the time frames that the illicit application had access to your organization, and the permissions the app had.</span></span> <span data-ttu-id="e3cbd-175">[Microsoft 365 보안 및 준수 센터](https://support.office.com/article/Search-the-audit-log-in-the-Office-365-Security-Compliance-Center-0d4d0f35-390b-4518-800e-0c7ec95e946c)에서 **감사 로그** 를 검색할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-175">You can search the **audit log** in the [Microsoft 365 Security and Compliance Center](https://support.office.com/article/Search-the-audit-log-in-the-Office-365-Security-Compliance-Center-0d4d0f35-390b-4518-800e-0c7ec95e946c).</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="e3cbd-176">[관리자 및 사용자에 대 한](https://support.office.com/article/turn-office-365-audit-log-search-on-or-off-e893b19a-660c-41f2-9074-d3631c95a014) [사서함 감사](https://support.office.com/article/Enable-mailbox-auditing-in-Office-365-aaca8987-5b62-458b-9882-c28476a66918) 및 활동 감사는이 정보를 받기 전에 사용 하도록 설정 되어 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-176">[Mailbox auditing](https://support.office.com/article/Enable-mailbox-auditing-in-Office-365-aaca8987-5b62-458b-9882-c28476a66918) and [Activity auditing for admins and users](https://support.office.com/article/turn-office-365-audit-log-search-on-or-off-e893b19a-660c-41f2-9074-d3631c95a014) must have been enabled prior to the attack for you to get this information.</span></span>

## <a name="how-to-stop-and-remediate-an-illicit-consent-grant--attack"></a><span data-ttu-id="e3cbd-177">불법 동의를 중지 하 고 수정 하는 방법 공격 허용</span><span class="sxs-lookup"><span data-stu-id="e3cbd-177">How to stop and remediate an illicit consent grant  attack</span></span>
<span data-ttu-id="e3cbd-178">불법 사용 권한이 있는 응용 프로그램을 식별 한 후에는 여러 가지 방법으로 해당 액세스 권한을 제거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-178">After you have identified an application with illicit permissions, you have several ways to remove that access.</span></span>
- <span data-ttu-id="e3cbd-179">다음을 수행 하 여 Azure Active Directory 포털에서 응용 프로그램의 권한을 해지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-179">You can revoke the application's permission in the Azure Active Directory Portal by:</span></span>
    - <span data-ttu-id="e3cbd-180">**Azure Active Directory 사용자** 블레이드에서 영향을 받는 사용자로 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-180">Navigate to the affected user in the **Azure Active Directory User** blade.</span></span>
    - <span data-ttu-id="e3cbd-181">**응용 프로그램**을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-181">Select **Applications**.</span></span>
    - <span data-ttu-id="e3cbd-182">불법 응용 프로그램을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-182">Select the illicit application.</span></span>
    - <span data-ttu-id="e3cbd-183">드릴 다운에서 **제거** 를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-183">Click **Remove** in the drill down.</span></span>
- <span data-ttu-id="e3cbd-184">[AzureADOAuth2PermissionGrant](https://docs.microsoft.com/powershell/module/azuread/Remove-AzureADOAuth2PermissionGrant?view=azureadps-2.0)의 단계에 따라 PowerShell을 사용 하 여 OAuth 승인 부여를 해지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-184">You can revoke the OAuth consent grant with PowerShell by following the steps in [Remove-AzureADOAuth2PermissionGrant](https://docs.microsoft.com/powershell/module/azuread/Remove-AzureADOAuth2PermissionGrant?view=azureadps-2.0).</span></span>
- <span data-ttu-id="e3cbd-185">[AzureADServiceAppRoleAssignment](https://docs.microsoft.com/powershell/module/azuread/Remove-AzureADServiceAppRoleAssignment?view=azureadps-2.0)의 단계에 따라 PowerShell을 사용 하 여 서비스 앱 역할 할당을 해지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-185">You can revoke the Service App Role Assignment with PowerShell by following the steps in [Remove-AzureADServiceAppRoleAssignment](https://docs.microsoft.com/powershell/module/azuread/Remove-AzureADServiceAppRoleAssignment?view=azureadps-2.0).</span></span>
- <span data-ttu-id="e3cbd-186">영향을 받는 계정에 대해서도 로그인을 사용 하지 않도록 설정할 수 있으며,이는 해당 계정의 데이터에 대 한 앱 액세스를 사용 하지 않도록 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-186">You can also disable sign-in for the affected account altogether, which will in turn disable app access to data in that account.</span></span> <span data-ttu-id="e3cbd-187">이는 최종 사용자의 생산성을 유지 하는 데 이상적이 지 않지만, 영향을 빠르게 하는 작업을 수행 하는 경우에는 장기 관리가 가능한 단기 수정이 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-187">This isn't ideal for the end user's productivity, of course, but if you are working to limit impact quickly, it can be a viable short-term remediation.</span></span>
- <span data-ttu-id="e3cbd-188">테 넌 시에 통합 된 응용 프로그램을 해제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-188">You can turn integrated applications off for your tenancy.</span></span> <span data-ttu-id="e3cbd-189">이 단계는 최종 사용자가 테 넌 트 전반에 대해 동의를 부여할 수 없도록 하는 절차입니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-189">This is a drastic step that disables the ability for end users to grant consent on a tenant-wide basis.</span></span> <span data-ttu-id="e3cbd-190">이렇게 하면 사용자가 악의적인 응용 프로그램에 실수로 액세스 하는 것을 방지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-190">This prevents your users from inadvertently granting access to a malicious application.</span></span> <span data-ttu-id="e3cbd-191">이는 타사 응용 프로그램의 생산성을 높이기 위해 사용자의 능력을 엄격히 저하 시키기 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-191">This isn't strongly recommended as it severely impairs your users' ability to be productive with third party applications.</span></span>  <span data-ttu-id="e3cbd-192">[통합 앱을 설정 하거나 해제](https://support.office.com/article/Turning-Integrated-Apps-on-or-off-7e453a40-66df-44ab-92a1-96786cb7fb34)하는 단계를 수행 하 여이 작업을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-192">You can do this by following the steps in  [Turning Integrated Apps on or off](https://support.office.com/article/Turning-Integrated-Apps-on-or-off-7e453a40-66df-44ab-92a1-96786cb7fb34).</span></span>

## <a name="secure-office-365-like-a-cybersecurity-pro"></a><span data-ttu-id="e3cbd-193">사이버 보안 전문가와 같은 Office 365 보안</span><span class="sxs-lookup"><span data-stu-id="e3cbd-193">Secure Office 365 like a cybersecurity pro</span></span>
<span data-ttu-id="e3cbd-194">Office 365 구독에는 데이터 및 사용자를 보호하는 데 사용할 수있는 강력한 보안 기능이 함께 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-194">Your Office 365 subscription comes with a powerful set of security capabilities that you can use to protect your data and your users.</span></span>  <span data-ttu-id="e3cbd-195">[Office 365 보안 로드맵: 최초 30일, 90일 및 그 이후의 최우선 순위](https://support.office.com/article/office-365-security-roadmap-top-priorities-for-the-first-30-days-90-days-and-beyond-28c86a1c-e4dd-4aad-a2a6-c768a21cb352)를 사용하여 Microsoft에서 권장하는 Office 365 테넌트 보안을 구현합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-195">Use the [Office 365 security roadmap: Top priorities for the first 30 days, 90 days, and beyond](https://support.office.com/article/office-365-security-roadmap-top-priorities-for-the-first-30-days-90-days-and-beyond-28c86a1c-e4dd-4aad-a2a6-c768a21cb352) to implement Microsoft recommended best practices for securing your Office 365 tenant.</span></span>
- <span data-ttu-id="e3cbd-196">처음 30일 이내에 수행 할 작업</span><span class="sxs-lookup"><span data-stu-id="e3cbd-196">Tasks to accomplish in the first 30 days.</span></span>  <span data-ttu-id="e3cbd-197">이러한 작업들은 즉각적인 영향을 미치며 사용자에게 영향을 미치지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-197">These have immediate affect and are low-impact to your users.</span></span>
- <span data-ttu-id="e3cbd-198">90일 이내에 수행해야 할 작업</span><span class="sxs-lookup"><span data-stu-id="e3cbd-198">Tasks to accomplish in 90 days.</span></span> <span data-ttu-id="e3cbd-199">이러한 작업들은 계획하고 구현하는 데 다소 시간이 걸리지만 보안 태세를 갖추는 데 큰 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-199">These take a bit more time to plan and implement but greatly improve your security posture.</span></span>
- <span data-ttu-id="e3cbd-200">90일 초과</span><span class="sxs-lookup"><span data-stu-id="e3cbd-200">Beyond 90 days.</span></span> <span data-ttu-id="e3cbd-201">이러한 향상된 기능은 처음 90일간의 작업에서 구축됩니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-201">These enhancements build in your first 90 days work.</span></span>

## <a name="see-also"></a><span data-ttu-id="e3cbd-202">참고 항목:</span><span class="sxs-lookup"><span data-stu-id="e3cbd-202">See also:</span></span>
- <span data-ttu-id="e3cbd-203">[내 응용 프로그램 목록에서 예기치 않은 응용 프로그램](https://docs.microsoft.com/azure/active-directory/application-access-unexpected-application) 은 데이터에 대 한 액세스 권한이 있는 예기치 않은 응용 프로그램이 있다는 것을 모르고 관리자에 게 필요한 다양 한 작업을 안내 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-203">[Unexpected application in my applications list](https://docs.microsoft.com/azure/active-directory/application-access-unexpected-application)  walks administrators through various actions they may want to take after realizing there are unexpected applications with access to data.</span></span>
- <span data-ttu-id="e3cbd-204">[Azure Active Directory를 사용 하 여 응용 프로그램 통합]  (https://docs.microsoft.com/azure/active-directory/active-directory-apps-permissions-consent) 승인 및 사용 권한에 대 한 간략 한 개요입니다.)</span><span class="sxs-lookup"><span data-stu-id="e3cbd-204">[Integrating applications with Azure Active Directory]  (https://docs.microsoft.com/azure/active-directory/active-directory-apps-permissions-consent)  is a high-level overview of consent and permissions.</span></span>  <span data-ttu-id="e3cbd-205">[승인 프레임 워크 섹션의 개요](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications#overview-of-the-consent-framework) 에 특히 주의 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-205">Pay particular attention to the [Overview of the consent framework](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications#overview-of-the-consent-framework) section.</span></span>
- <span data-ttu-id="e3cbd-206">[문제 내 응용 프로그램을 개발](https://docs.microsoft.com/azure/active-directory/active-directory-application-dev-development-content-map) 하는 경우 다양 한 승인 관련 문서의 링크를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-206">[Problems developing my application](https://docs.microsoft.com/azure/active-directory/active-directory-application-dev-development-content-map) provides links to various consent related articles.</span></span>
- <span data-ttu-id="e3cbd-207">azure [Active Directory의 응용 프로그램 및 서비스 보안 주체 개체 (azure AD)](https://docs.microsoft.com/azure/active-directory/develop/active-directory-application-objects) 에서는 응용 프로그램 모델의 핵심 응용 프로그램 및 서비스 보안 주체 개체에 대 한 개요를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-207">[Application and service principal objects in Azure Active Directory (Azure AD)](https://docs.microsoft.com/azure/active-directory/develop/active-directory-application-objects) provides an overview of the Application and Service principal objects that are core to the application model.</span></span>
- <span data-ttu-id="e3cbd-208">[앱에 대 한 액세스 관리](https://docs.microsoft.com/azure/active-directory/active-directory-managing-access-to-apps) 는 관리자가 앱에 대 한 사용자 액세스를 관리 하기 위해 사용 해야 하는 기능에 대 한 개요입니다.</span><span class="sxs-lookup"><span data-stu-id="e3cbd-208">[Manage access to apps](https://docs.microsoft.com/azure/active-directory/active-directory-managing-access-to-apps) is an overview of the capabilities that administrators have to manage user access to apps.</span></span>
