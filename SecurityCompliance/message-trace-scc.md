---
title: 보안 및 준수 센터의 메시지 추적
ms.author: chrisda
author: chrisda
manager: dansimp
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
ms.assetid: 3e64f99d-ac33-4aba-91c5-9cb4ca476803
description: 관리자는 보안 & 준수 센터에서 메시지 추적을 사용 하 여 메시지에 대 한 변경 내용을 확인할 수 있습니다.
ms.openlocfilehash: 3c5efb1d832a52c6b6b5eb9cfb81ece216c64513
ms.sourcegitcommit: 1947ad3c0dde9163ba9b6834d8b38bd04b4264a5
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/27/2019
ms.locfileid: "36643260"
---
# <a name="message-trace-in-the-security--compliance-center"></a>보안 및 준수 센터의 메시지 추적

## <a name="overview"></a>개요

보안 & 준수 센터의 메시지 추적은 Exchange Online 조직에서 이동 하는 전자 메일 메시지를 따릅니다. 서비스가 메시지를 수신, 거부, 지연 또는 배달 했는지 여부를 확인할 수 있습니다. 또한 최종 상태에 도달 하기 전에 메시지에 대해 수행 된 작업을 보여 줍니다.

보안 & 준수 센터의 메시지 추적은 EAC (Exchange 관리 센터)에서 사용 가능 했던 메시지 추적에 대 한 개선 사항입니다. 메시지 추적의 정보를 사용 하 여 메시지에 발생 한 상황에 대 한 사용자 질문을 효율적으로 응답 하 고, 메일 흐름 문제를 해결 하 고, 정책 변경을 확인할 수 있습니다.

> [!NOTE]
>  메시지 수가 50 000에서 중지 되 고 보고서에는 콘솔의이 크기 까지만 반영 됩니다. PowerShell cmdlet Get-historicalsearch cmdlet은 true 메시지 수를 표시 합니다.

## <a name="open-message-trace"></a>메시지 추적 열기

1. 회사 또는 학교 계정로 [Office 365에 로그인](https://support.office.com/article/e9eb7d51-5430-4929-91ab-6157c5a050b4)합니다.

2. 왼쪽 위에서 앱 시작 관리자 아이콘 ![Office 365 앱 시작 관리자 아이콘](media/0aaa6945-f9a4-4b13-bf5f-d5c5dbe978fb.png)을 선택하고 **관리자**를 선택합니다.

3. 왼쪽 아래 탐색 창에서 **관리 센터** 를 확장 하 고 **보안 & 준수**를 선택 합니다.

4. 열리는 **보안 & 준수** 페이지에서 **메일 흐름**을 확장 하 고 **메시지 추적**을 선택 합니다.

## <a name="message-trace-page"></a>메시지 추적 페이지

여기에서 **추적 시작** 단추를 클릭 하 여 새 기본 추적을 시작할 수 있습니다. 지난 2 일 동안의 모든 보낸 사람과 받는 사람에 대 한 모든 메시지를 검색 합니다. 또는 사용 가능한 쿼리 범주에서 저장 된 쿼리 중 하나를 사용 하 여이를 그대로 실행 하거나 직접 쿼리를 위한 시작 점으로 사용할 수 있습니다.

- **기본 쿼리**: Office 365에서 제공 하는 기본 제공 쿼리

- **사용자 지정 쿼리**: 나중에 사용 하기 위해 조직의 관리자가 저장 한 쿼리

- 자동 **저장 된 쿼리**: 가장 최근에 실행 한 지난 10 개의 쿼리 이 목록을 사용 하면 중단 된 위치를 쉽게 선택할 수 있습니다.

또한이 페이지에서 다운로드 가능한 보고서 뿐 아니라 제출한 요청에 대 한 **다운로드 가능한 보고서** 섹션도 볼 수 있습니다.

## <a name="options-for-a-new-message-trace"></a>새 메시지 추적에 대 한 옵션

### <a name="filter-by-senders-and-recipients"></a>보낸 사람 및 받는 사람 별로 필터링

기본값은 **모든 보낸 사람** 및 **모든 받는 사람**이지만 다음 필드를 사용 하 여 결과를 필터링 할 수 있습니다.

- **다음 사용자가**이 필드를 클릭 하 여 조직에서 보낸 사람을 한 명 이상 선택 합니다. 또한 검색 페이지의 작동 방식과 마찬가지로, 이름 입력을 시작 하 고 목록의 항목이 입력 한 대로 필터링 됩니다.

- 다음 **사용자에 게**:이 필드를 클릭 하 여 조직에서 하나 이상의 받는 사람을 선택 합니다.

> [!NOTE]
> 외부의 보낸 사람 및 받는 사람의 전자 메일 주소를 입력할 수도 있습니다. 와일드 카드는 지원`*@contoso.com` ( `scot?@contoso.com`또는) 되지만 동시에 같은 필드에 여러 와일드 카드 항목을 사용할 수는 없습니다.<br/>여러 보낸 사람 또는 받는 사람 목록을 세미콜론 (`;`)으로 구분 하 여 붙여 넣을 수 있습니다. 공백 (`\s`), 캐리지 리턴 (`\r`) 또는 다음 줄 (`\n`) 기호를 사용할 수 있습니다.

### <a name="time-range"></a>시간 범위

기본값은 **2 일**이지만 날짜/시간 범위를 최대 90 일로 지정할 수 있습니다. 날짜/시간 범위를 사용 하는 경우 다음 문제를 고려 하십시오.

- 기본적으로 **슬라이더** 보기의 시간 범위는 시간 선을 사용 하 여 선택 합니다. 표시 되는 일 또는 시간 설정만 선택할 수 있습니다. 범위 내 값을 선택 하면 가장 가까운 표시 설정에 시작/종료 버블이 맞춰집니다.

   ![보안 & 준수 센터의 새 메시지 추적에서 슬라이더 시간 범위](media/55a9e9c1-f7d5-4047-b217-824e8b976bcb.png)

   그러나 **시작 날짜** 및 **끝 날짜** 값 (시간 포함)을 지정할 수 있는 **사용자 지정** 보기로 전환한 다음 날짜/시간 범위의 **표준 시간대** 를 선택할 수도 있습니다. **표준 시간대** 설정은 쿼리 입력과 쿼리 결과에 모두 적용 됩니다.

   ![보안 & 준수 센터의 새 메시지 추적에 사용자 지정 시간 범위](media/ed4c8d50-9ea5-4694-93f9-ee3ab6660b4f.png)

   10 일 이하인 경우 결과를 **요약** 보고서로 즉시 사용할 수 있습니다. 10 일 보다 약간 큰 시간 범위를 지정 하면 다운로드 가능한 CSV 파일 ( **고급 요약** 또는 **확장** 보고서)로만 사용할 수 있으므로 결과가 지연 됩니다.

   다양 한 보고서 유형에 대 한 자세한 내용은이 항목의 [보고서 유형 선택](#choose-report-type) 섹션을 참조 하십시오.

   **참고**: 확장 된 요약 및 확장 보고서는 보관 메시지 추적 데이터를 사용 하 여 준비 되며, 보고서를 다운로드 하는 데 몇 시간이 걸릴 수 있습니다. 동시에 보고서 요청을 제출한 다른 관리자의 수에 따라 대기 중인 요청에 대해 처리가 시작 되기 전에 지연이 발생할 수도 있습니다.

- **슬라이더** 보기에 쿼리를 저장 하면 상대 시간 범위 (예: 오늘 3 일)가 저장 됩니다. 쿼리를 **사용자 지정** 보기에 저장 하면 절대 날짜/시간 범위 (예: 2018-05-06 13:00-2018-05-08 18:00)가 저장 됩니다.

### <a name="more-search-options"></a>기타 검색 옵션

#### <a name="delivery-status"></a>배달 상태

기본값을 **모두** 선택 된 채로 두거나 다음 값 중 하나를 선택 하 여 결과를 필터링 할 수 있습니다.

- **배달**됨: 메시지가 의도 한 대상에 배달 되었습니다.

- **Pending**: 메시지 배달이 시도 중이거나 다시 시도 중입니다.

- **확장**: 메일 그룹 받는 사람이 그룹의 개별 구성원에 게 배달 되기 전에 확장 되었습니다.

- **실패**: 메시지가 배달 되지 않았습니다.

- **격리**됨: 메시지가 스팸, 대량 메일 또는 피싱 메일로 격리 되었습니다. 자세한 내용은 [Office 365에서 전자 메일 메시지 격리](https://support.office.com/article/4c234874-015e-4768-8495-98fcccfc639b.aspx)를 참조 하세요.

- **스팸으로 필터링**됨: 메시지가 스팸으로 식별 되었으며, 거부 되거나 차단 (격리 되지 않음) 되었습니다.

- **상태 가져오기:** 최근에 Office 365에서 메시지를 받았지만 다른 상태 데이터는 아직 사용할 수 없습니다. 잠시 후 다시 확인 하세요.

**참고**: **Pending,** **검역** **됨 및 Filter로 필터링** 은 10 일 미만의 검색에만 사용할 수 있습니다. 또한 실제 및 보고 된 배달 상태 사이에도 5 ~ 10 분의 지연이 있을 수 있습니다.

#### <a name="message-id"></a>메시지 ID

메시지 헤더의 **메시지 id:** 헤더 필드에 있는 인터넷 메시지 Id (클라이언트 ID 라고도 함)입니다. 사용자는 특정 메시지를 조사 하기 위해이 값을 제공할 수 있습니다.

이 값은 메시지 수명을 나타내는 상수입니다. Office 365 또는 Exchange에서 만든 메시지의 경우이 값은 꺾쇠 괄호 ( `<GUID@ServerFQDN>`\< \>)를 포함 하는 형식으로 되어 있습니다. 예를 들면 `<d9683b4c-127b-413a-ae2e-fa7dfb32c69d@DM3NAM06BG401.Eop-nam06.prod.protection.outlook.com>`와 같습니다. 다른 메시징 시스템에서는 다른 구문이 나 값을 사용할 수 있습니다. 이 값은 고유 해야 하지만 일부 전자 메일 시스템에서는이 요구 사항을 엄격 하 게 따르지 않습니다. **메시지 ID:** 헤더 필드가 존재 하지 않거나 외부 원본의 받는 메시지에 대해 비어 있는 경우 임의의 값이 할당 됩니다.

**메시지 ID** 를 사용 하 여 결과를 필터링 할 때 꺾쇠 괄호를 포함 하 여 전체 문자열을 포함 해야 합니다.

#### <a name="direction"></a>Direction

기본값을 **모두** 선택 된 채로 두거나, **인바운드** (조직의 받는 사람에 게 보낸 메시지) 또는 **아웃 바운드** (조직의 사용자가 보낸 메시지)를 선택 하 여 결과를 필터링 할 수 있습니다.

#### <a name="original-client-ip-address"></a>원래 클라이언트 IP 주소

클라이언트 IP 주소로 결과를 filer 하 여 많은 양의 스팸 또는 맬웨어를 보내는 해킹 당한 컴퓨터를 조사할 수 있습니다. 메시지가 여러 보낸 사람 으로부터 온 것 처럼 보일 수 있지만 동일한 컴퓨터에서 모든 메시지를 생성 하 고 있을 가능성이 높습니다.

**참고**: 클라이언트 IP 주소 정보는 10 일 동안에만 사용할 수 있으며, **고급 요약** 또는 **확장** 보고서 (다운로드 가능 CSV 파일) 에서만 사용할 수 있습니다.

### <a name="choose-report-type"></a>보고서 유형 선택

사용 가능한 보고서 유형은 다음과 같습니다.

- **요약**: 시간 범위가 10 일 미만이 면 사용 가능, 추가 필터링 옵션을 사용 하지 않아도 됩니다. 결과는 **검색**을 클릭 하면 즉시 사용할 수 있습니다.

- **향상 된 요약** 또는 **확장**: 이러한 보고서는 다운로드 가능한 CSV 파일로만 제공 되며, **이러한 사용자** **** **에의 한 시간 범위에 관계 없이 다음 필터링 옵션 중 하나 이상이 필요 합니다. 메시지 ID**입니다. 보낸 사람 또는 받는 사람 (예: \*@contoso .com)에 와일드 카드를 사용할 수 있습니다.

**참고:**

- 향상 된 요약 및 확장 보고서는 아카이브된 메시지 추적 데이터를 사용 하 여 준비 되며, 보고서를 다운로드 하는 데 몇 시간이 걸릴 수 있습니다. 동시에 보고서 요청을 제출한 다른 관리자의 수에 따라 대기 요청이 처리 되기 시작 하기 전에 지연이 발생할 수도 있습니다.

- 날짜/시간 범위에 대해 고급 요약 또는 확장 보고서를 선택할 수 있지만 일반적으로 이러한 두 가지 유형의 보고서에서는 보관 된 데이터의 마지막 4 시간을 사용할 수 없습니다.

**다음**을 클릭 하면 선택한 필터링 옵션, 보고서의 고유한 제목, 메시지 추적이 완료 되 면 알림을 받는 전자 메일 주소 (편집 가능)가 나열 된 요약 페이지와 함께 표시 됩니다. 조직의 허용 도메인 중 하나에 있어야 합니다. **보고서 준비** 를 클릭 하 여 메시지 추적을 제출 합니다. 주 **메시지 추적** 페이지에서 **다운로드 가능한 보고서** 섹션에서 보고서의 상태를 확인할 수 있습니다.

서로 다른 보고서 유형에 서 반환 되는 정보에 대 한 자세한 내용은 다음 섹션을 참조 하십시오.

## <a name="message-trace-results"></a>메시지 추적 결과

각 보고서 유형은 서로 다른 정보 수준을 반환 합니다. 다음 섹션에서는 각 보고서에서 사용할 수 있는 정보에 대해 설명 합니다.

### <a name="summary-report-output"></a>요약 보고서 출력

메시지 추적을 실행 한 후 결과가 나열 되 고 내림차순 날짜/시간 (가장 최근 것부터)을 기준으로 정렬 됩니다.

![보안 & 준수 센터의 메시지 추적에 대 한 요약 보고서 결과](media/0664bafe-0b03-477b-b571-0b046ac8c977.png)

요약 보고서에는 다음과 같은 정보가 포함 됩니다.

- **날짜**: 구성 된 UTC 표준 시간대를 사용 하 여 서비스에서 메시지를 받은 날짜와 시간입니다.

- **보낸 사람**: 보낸 사람의 전자 메일 주소 (*별칭*@*도메인*)입니다.

- **받는 사람**: 받는 사람의 전자 메일 주소입니다. 여러 받는 사람에 게 보내는 메시지의 경우 받는 사람당 한 줄이 있습니다. 받는 사람이 메일 그룹, 동적 메일 그룹 또는 메일 사용이 가능한 보안 그룹인 경우 그룹은 첫 번째 받는 사람이 되며, 그룹의 각 구성원은 별도의 줄에 있습니다.

- **제목**: 메시지 **제목:** 필드의 처음 256 자입니다.

- **상태**: 이러한 값은 [배달 상태](#delivery-status) 섹션에 설명 되어 있습니다.

기본적으로 첫 번째 250 결과가 로드 되어 즉시 사용할 수 있습니다. 아래로 스크롤하면 다음 결과 배치가 로드 될 때 약간의 일시 중지가 발생 합니다. 스크롤 대신 **모두 로드** 를 클릭 하 여 모든 결과를 최대 1만까지 로드할 수 있습니다.

열 머리글을 클릭 하 여 해당 열의 값을 기준으로 오름차순 또는 내림차순으로 결과를 정렬할 수 있습니다.

**필터 결과** 를 클릭 하 여 하나 이상의 열을 기준으로 결과를 필터링 할 수 있습니다.

**결과** 내보내기를 클릭 한 후 **모든 결과**내보내기, **로드 된 결과 내보내기**또는 **선택한 내보내기를**선택 하 여 하나 이상의 행을 선택한 후 결과를 내보낼 수 있습니다.

#### <a name="find-related-records-for-this-message"></a>이 메시지에 대 한 관련 레코드 찾기

관련 메시지 레코드는 동일한 메시지 ID를 공유 하는 레코드입니다. 두 사용자 간에 전송 되는 단일 메시지는 여러 레코드를 생성할 수 있습니다. 메일 그룹 확장, 전달, 메일 흐름 규칙 (전송 규칙이 라고도 함) 등으로 인해 메시지가 영향을 받는 경우 레코드 수가 증가 합니다.

행의 확인란을 선택한 후에는 **관련** 된 레코드 찾기 단추를 클릭 하거나](media/1ea52bbf-9d00-48ce-9362-307f7f6fb7fe.png) \> **이 메시지에 대 한 관련 레코드**보다 더 많은 추가 **옵션** ![을 선택 하 여 해당 메시지에 대 한 관련 기록을 찾을 수 있습니다.

메시지 ID에 대 한 자세한 내용은이 항목 앞부분의 메시지 ID 섹션을 참조 하십시오.

#### <a name="message-trace-details"></a>메시지 추적 정보

요약 보고서 출력에서 다음 방법 중 하나를 사용 하 여 메시지에 대 한 세부 정보를 볼 수 있습니다.

- 행을 선택 하 고 확인란을 제외 하 고 행의 아무 곳 이나 클릭 합니다.

- 행의 확인란을 선택 하 고 **기타 옵션** ![기타](media/1ea52bbf-9d00-48ce-9362-307f7f6fb7fe.png) \> **메시지 보기**를 클릭 합니다.

   ![요약 보고서 메시지 추적에서 행을 두 번 클릭 하면 보안 & 준수 센터의 결과가 반환 됩니다.](media/e50ee7cd-810a-4c06-8b58-e56ffd7028d1.png)

메시지 추적 세부 정보에는 요약 보고서에 표시 되지 않는 다음과 같은 추가 정보가 포함 됩니다.

- **메시지 이벤트**:이 섹션에는 서비스에서 메시지에 대해 수행 하는 작업을 분류 하는 데 도움이 되는 분류가 포함 되어 있습니다. 발생할 수 있는 몇 가지 흥미로운 이벤트는 다음과 같습니다.

   - **Receive**: 서비스가 메시지를 받았습니다.

   - **Send**: 메시지가 서비스에 의해 전송 되었습니다.

   - **Fail**: 메시지를 배달 하지 못했습니다.

   - **배달**: 메시지가 사서함에 배달 되었습니다.

   - **Expand**: 확장 된 메일 그룹으로 메시지를 보냈습니다.

   - **전송**: 콘텐츠 변환, 메시지 받는 사람 제한 또는 에이전트로 인해 받는 사람이 분기 메시지로 메시지로 이동 되었습니다.

   - **지연**: 메시지 배달이 연기 되었으며 나중에 다시 시도 될 수 있습니다.

   - **해결 됨**: 메시지가 Active Directory 조회를 기반으로 하는 새 받는 사람 주소로 리디렉션 되었습니다. 이 경우 원본 받는 사람 주소가 메시지 추적에 별도의 행으로 표시되고 메시지의 최종 배달 상태가 표시됩니다.

   성공적으로 전달 되는 이벤트가 없는는 메시지 추적에 여러 **이벤트** 항목을 생성 합니다.

- **추가 정보**:이 섹션에는 다음과 같은 세부 정보가 포함 되어 있습니다.

   - **메시지 id**:이 값은이 항목 앞부분의 [메시지 id](#message-id) 섹션에 설명 되어 있습니다. 예를 들면 `<d9683b4c-127b-413a-ae2e-fa7dfb32c69d@DM3NAM06BG401.Eop-nam06.prod.protection.outlook.com>`와 같습니다.

   - **메시지 크기**   첨부 파일 등을 비롯한 메시지 크기(KB)입니다.

   - **보낸 사람 IP**: 메시지를 보낸 컴퓨터의 IP 주소입니다. Exchange Online에서 전송되는 아웃바운드 메시지의 경우 이 값은 비어 있습니다.

   - **받는 사람 ip**: 서비스에서 메시지 배달을 시도한 IP 주소 또는 주소입니다. 받는 사람이 여러 명일 경우 메시지가 표시 됩니다. Exchange Online으로 전송되는 인바운드 메시지의 경우 이 값은 비어 있습니다.

### <a name="enhanced-summary-reports"></a>향상 된 요약 보고서

사용 가능 (완료 됨) 향상 된 요약 보고서는 시작 메시지 추적의 **다운로드 가능한 보고서** 섹션에서 확인할 수 있습니다. 보고서에서는 다음과 같은 정보를 사용할 수 있습니다.

- **origin_timestamp**<sup>*</sup>: 구성 된 UTC 표준 시간대를 사용 하 여 서비스에서 처음으로 메시지를 받은 날짜와 시간입니다.

- **sender_address**: 보낸 사람의 전자 메일 주소 (*별칭*@*도메인*)입니다.

- **Recipient_status**: 받는 사람에 대 한 메시지 배달 상태입니다. 메시지가 여러 받는 사람에 게 전송 되 면 \< *전자 메일 주소*\>##\<*상태*\>와 같은 형식으로 모든 받는 사람과 해당 상태가 표시 됩니다. 예를 들면 다음과 같습니다.

   - **# #Receive, Send** 는 서비스에서 메시지를 받았으며 의도 한 대상으로 전송 되었음을 의미 합니다.

   - **# #Receive, Fail** 은 서비스에서 메시지를 받았지만 의도 한 대상에 배달 하지 못했음을 의미 합니다.

   - **# #Receive, 배달** 이란 서비스가 메시지를 받았으며 받는 사람의 사서함으로 배달 되었음을 의미 합니다.

- **message_subject**: 메시지의 **제목** 필드에서 처음 256 자입니다.

- **total_bytes**: 첨부 파일을 포함 한 메시지의 크기 (바이트)입니다.

- **message_id**:이 값은이 항목 앞부분의 [메시지 id](#message-id) 섹션에 설명 되어 있습니다. 예를 들면 `<d9683b4c-127b-413a-ae2e-fa7dfb32c69d@DM3NAM06BG401.Eop-nam06.prod.protection.outlook.com>`와 같습니다.

- **network_message_id**: 분기 또는 메일 그룹 확장으로 인해 만들어질 수 있는 모든 메시지 복사본에 걸쳐 유지 되는 고유한 메시지 id 값입니다. 예를 들면 값 `1341ac7b13fb42ab4d4408cf7f55890f`은입니다.

- **original_client_ip**: 보낸 사람의 클라이언트 ip 주소입니다.

- **방향성**: 메시지가 조직에 전송 된 인바운드 (1) 인지 또는 조직에서 보낸 아웃 바운드 메시지 (2)를 나타냅니다.

- **connector_id**: 원본 또는 대상 커넥터의 이름입니다. Exchange Online의 커넥터에 대 한 자세한 내용은 [Office 365에서 커넥터를 사용 하 여 메일 흐름 구성을](https://docs.microsoft.com/Exchange/mail-flow-best-practices/use-connectors-to-configure-mail-flow/use-connectors-to-configure-mail-flow)참조 하세요.

- **delivery_priority**<sup>*</sup>: 메시지가 **높음**, **낮음**또는 **보통** 우선 순위와 함께 전송 되었는지 여부

<sup>*</sup>이러한 속성은 향상 된 요약 보고서 에서만 사용할 수 있습니다.

### <a name="extended-reports"></a>확장 된 보고서

사용 가능 (완료 됨) 확장 보고서는 메시지 추적을 시작할 때 **다운로드 가능한 보고서** 섹션에서 사용할 수 있습니다. 고급 요약 보고서의 모든 정보는 **origin_timestamp** 및 **delivery_priority**를 제외 하 고 확장 된 보고서에서 사용할 수 있습니다. 다음 추가 정보는 확장 된 보고서 에서만 사용할 수 있습니다.

- **client_ip**: 메시지를 전송한 전자 메일 서버 또는 메시징 클라이언트의 ip 주소입니다.

- **client_hostname**: 메시지를 전송한 전자 메일 서버 또는 메시징 클라이언트의 호스트 이름 또는 FQDN입니다.

- **server_ip**: 원본 또는 대상 서버의 ip 주소입니다.

- **server_hostname**: 대상 서버의 호스트 이름 또는 FQDN입니다.

- **source_context**: **원본** 필드와 관련 된 추가 정보입니다. 예를 들면 다음과 같습니다.

   - `Protocol Filter Agent`

   - `3489061114359050000`

- **원본**: 이벤트를 담당 하는 Exchange Online 구성 요소입니다. 예를 들면 다음과 같습니다.

   - `AGENT`

   - `MAILBOXRULE`

   - `SMTP`

- **event_id**: [이 메시지의 관련 레코드 찾기](#find-related-records-for-this-message) 섹션에서 설명 하는 **메시지 이벤트** 값에 해당 합니다.

- **internal_message_id**: 현재 메시지를 처리 하는 Exchange Online 서버에서 할당 한 메시지 식별자입니다.

- **recipient_address**: 메시지 받는 사람의 전자 메일 주소입니다. 전자 메일 주소가 여러 개인 경우 세미콜론(;)으로 구분합니다.

- **recipient_count**: 메시지의 총 받는 사람 수입니다.

- **related_recipient_address**:, 및 `EXPAND` `RESOLVE` 이벤트 `REDIRECT`와 함께 사용 하 여 메시지와 연결 된 다른 받는 사람의 전자 메일 주소를 표시 합니다.

- **참조**:이 필드에는 특정 유형의 이벤트에 대 한 추가 정보가 포함 되어 있습니다. 예를 들면 다음과 같습니다.

   - **Dsn**:이 이벤트 다음에 dsn이 생성 되는 경우 관련 된 배달 상태 알림 (dsn, 배달 못 함 보고서, NDR 또는 바운스 메시지)의 **message_id** 값을 나타내는 보고서 링크가 포함 되어 있습니다. DSN 메시지의 경우이 필드에는 DSN이 생성 된 원본 메시지의 **message_id** 값이 포함 됩니다.

   - **EXPAND**: 관련 메시지의 **related_recipient_address** 값을 포함 합니다.

   - **RECEIVE**: 다른 프로세스에서 메시지를 생성 한 경우 (예를 들어, 받은 편지함 규칙) 관련 메시지의 **message_id** 값을 포함할 수 있습니다.

   - **SEND**: DSN 메시지의 **internal_message_id** 값을 포함 합니다.

   - **TRANSFER**: 분기 중인 메시지의 **internal_message_id** 값을 포함 합니다 (예를 들어 콘텐츠 변환, 메시지 받는 사람 제한 또는 에이전트).

   - **MAILBOXRULE**: 받은 편지함 규칙에서 아웃 바운드 메시지를 생성 하도록 만든 인바운드 메시지의 **internal_message_id** 값을 포함 합니다.

   다른 이벤트 유형의 경우에는이 필드는 대개 비어 있습니다.

- **return_path**: 메시지를 보낸 **메일** 보낸 사람 명령에 지정 된 반송 전자 메일 주소입니다. 이 필드는 비어 있지 않지만로 `<>`표시 되는 null 보낸 사람 주소 값을 가질 수 있습니다.

- **message_info**: 메시지에 대 한 추가 정보입니다. 예를 들면 다음과 같습니다.

   - 이벤트에 대 한 `DELIVER` UTC의 메시지 시작 날짜 및 `SEND` 시간입니다. 시작 날짜-시간은 메시지가 처음으로 Exchange Online 조직에 입력 되는 시간입니다. UTC 날짜 `yyyy-mm-ddThh:mm:ss.fffZ`-시간은 ISO 8601 날짜/시간 형식으로 표시 되며, 여기서 `yyyy` = 년, `mm` = month, `dd` = 일은 시간 구성 요소의 `T` 시작을 `hh` 나타내고 = hour, `mm` = minute, `ss` = second, `fff` =를 나타냅니다. 초의 소수 부분을 나타내고 UTC `Z` 를 `Zulu`표시 하는 또 다른 방법인 의미입니다.

   - 인증 오류입니다. 예를 들어, 인증 오류가 발생 했 `11a` 을 때 사용 된 인증의 유형 및 값을 확인할 수 있습니다.

- **tenant_id**: Exchange Online 조직 (예를 `39238e87-b5ab-4ef6-a559-af54c6b07b42`들어)을 나타내는 GUID 값입니다.

- **original_server_ip**: 원래 서버의 ip 주소입니다.

- **custom_data**: 특정 이벤트 유형과 관련 된 데이터를 포함 합니다. 자세한 내용은 다음 섹션을 참조 하십시오.

#### <a name="custom_data-values"></a>custom_data 값

이벤트의 custom_data 필드는 다양 한 Exchange Online 에이전트에서 메시지 처리 정보를 기록 하는 데 사용 됩니다. **** `AGENTINFO` 다음 섹션에서는 보다 흥미로운 에이전트 중 일부에 대해 설명 합니다.

#### <a name="spam-filter-agent"></a>스팸 필터 에이전트

다음 **** 으로 `S:SFA` 시작 하는 custom_data 값은 스팸 필터 에이전트입니다. 주요 세부 정보는 다음 표에 설명 되어 있습니다.

|**값**|**설명**|
|:-----|:-----|
|`SFV=NSPM`|메시지가 스팸이 아닌 것으로 표시되었으며 받는 사람에게 전송되었습니다.|
|`SFV=SPM`|메시지가 콘텐츠 필터에 의해 스팸으로 표시되었습니다.|
|`SFV=BLK`|수신 거부된 보낸 사람이 보낸 메시지이므로 필터링을 건너뛰었으며 메시지가 차단되었습니다.|
|`SFV=SKS`|메시지가 콘텐츠 필터에 의해 처리되기 전에 이미 스팸으로 표시되었습니다. 전송 규칙과 일치하여 스팸으로 자동 표시되고 모든 추가 필터링을 무시하는 메시지가 여기에 포함됩니다.|
|`SCL=<number>`|다양 한 SCL 값과 그 의미에 대 한 자세한 내용은 [스팸 신뢰 수준](https://technet.microsoft.com/library/jj200686.aspx)를 참조 하세요.|
|`PCL=<number>`|메시지의 PCL(피싱 지수) 값입니다. 스팸 지 수 [수준](https://technet.microsoft.com/library/jj200686.aspx)에 문서화 된 SCL 값과 같은 방식으로 해석 될 수도 있습니다.|
|`DI=SB`|메시지의 보낸 사람이 차단되었습니다.|
|`DI=SQ`|메시지가 격리되었습니다.|
|`DI=SD`|메시지가 삭제되었습니다.|
|`DI=SJ`|메시지가 받는 사람의 정크 메일 폴더로 전송 되었습니다.|
|`DI=SN`|메시지가 위험 수준이 높은 배달 풀을 통해 라우팅되었습니다. 자세한 내용은 [아웃 바운드 메시지에 대 한 위험성이 높은 배달 풀](https://technet.microsoft.com/library/jj200746.aspx)을 참조 하십시오.|
|`DI=SO`|메시지가 일반 아웃바운드 배달 풀을 통해 라우팅되었습니다.|
|`SFS=[a]|SFS=[b]`|스팸 규칙이 일치했음을 나타냅니다.|
|`IPV=CAL`|연결 필터의 IP 허용 목록에 IP 주소가 지정되어 있어 메시지가 스팸 필터를 통과하도록 허용되었습니다.|
|`H=<EHLOstring>`|연결 하는 전자 메일 서버의 HELO 또는 EHLO 문자열입니다.|
|`PTR=<ReverseDNS>`|보내는 IP 주소의 PTR 레코드로, 역방향 DNS 주소라고도 합니다.|

다음과 같이 스팸을 필터링 한 메시지에 대 한 예제 **custom_data** 값입니다.

`S:SFA=SUM|SFV=SPM|IPV=CAL|SRV=BULK|SFS=470454002|SFS=349001|SCL=9|SCORE=-1|LIST=0|DI=SN|RD=ftmail.inc.com|H=ftmail.inc.com|CIP=98.129.140.74|SFP=1501|ASF=1|CTRY=US|CLTCTRY=|LANG=en|LAT=287|LAT=260|LAT=18;`

#### <a name="malware-filter-agent"></a>맬웨어 필터 에이전트

다음 **** 으로 `S:AMA` 시작 하는 custom_data 값은 맬웨어 필터 에이전트입니다. 주요 세부 정보는 다음 표에 설명 되어 있습니다.

|**값**|**설명**|
|:-----|:-----|
|`AMA=SUM|v=1|`사용자나`AMA=EV|v=1`|메시지에 맬웨어가 포함된 것으로 확인되었습니다. `SUM`여러 엔진에서 맬웨어를 검색할 수 있음을 나타냅니다. `EV`특정 엔진에 의해 맬웨어가 검색 되었음을 나타냅니다. 맬웨어가 엔진에서 검색되면 후속 작업이 트리거됩니다.|
|`Action=r`|메시지가 대체되었습니다.|
|`Action=p`|메시지가 무시되었습니다.|
|`Action=d`|메시지가 지연되었습니다.|
|`Action=s`|메시지가 삭제되었습니다.|
|`Action=st`|메시지가 무시되었습니다.|
|`Action=sy`|메시지가 무시되었습니다.|
|`Action=ni`|메시지가 거부되었습니다.|
|`Action=ne`|메시지가 거부되었습니다.|
|`Action=b`|메시지가 차단되었습니다.|
|`Name=<malware>`|검색된 맬웨어의 이름입니다.|
|`File=<filename>`|맬웨어가 포함된 파일의 이름입니다.|

맬웨어를 포함 하는 메시지에 대 한 **custom_data** 값 예는 다음과 같습니다.

`S:AMA=SUM|v=1|action=b|error=|atch=1;S:AMA=EV|engine=M|v=1|sig=1.155.974.0|name=DOS/Test_File|file=filename;S:AMA=EV|engine=A|v=1|sig=201707282038|name=Test_File|file=filename`

#### <a name="transport-rule-agent"></a>전송 규칙 에이전트

다음 **** 으로`S:TRA` 시작 하는 custom_data 값은 메일 흐름 규칙 (전송 규칙이 라고도 함)에 대 한 전송 규칙 에이전트입니다. 주요 세부 정보는 다음 표에 설명 되어 있습니다.

|**값**|**설명**|
|:-----|:-----|
|`ETR|ruleId=<guid>`|일치된 규칙 ID입니다.|
|`St=<datetime>`|규칙 일치가 발생 한 날짜 및 시간 (UTC)입니다.|
|`Action=<ActionDefinition>`|적용된 작업입니다. 사용 가능한 작업 목록은 [Mail flow rule actions In Exchange Online](https://technet.microsoft.com/library/jj919237.aspx)을 참조 하십시오.|
|`Mode=<Mode>`|규칙의 모드입니다. 사용할 수 있는 값은 다음과 같습니다. <br/>• **적용**: 규칙에 대 한 모든 작업이 적용 됩니다. <br/>• **정책 팁으로 테스트:**: 모든 정책 설명 작업이 전송 되지만 다른 적용 작업은 실행 되지 않습니다. <br/>• **정책 설명이 없는 테스트**: 작업이 로그 파일에 나열 되지만 보낸 사람에 게 어떤 식으로도 알림이 제공 되지 않으며 적용 작업이 실행 되지 않습니다.|

메일 흐름 규칙의 조건과 일치 하는 메시지에 대 한 **custom_data** 값 예는 다음과 같습니다.

`S:TRA=ETR|ruleId=19a25eb2-3e43-4896-ad9e-47b6c359779d|st=7/17/2017 12:31:25 AM|action=ApplyHtmlDisclaimer|sev=1|mode=Enforce`
