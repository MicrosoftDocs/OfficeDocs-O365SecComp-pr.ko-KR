---
title: Office 365의 고객 키를 사용한 서비스 암호화 관련 자주하는 질문
ms.author: krowley
author: kccross
manager: laurawi
ms.date: 7/31/2018
ms.audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.assetid: 41ae293a-bd5c-4083-acd8-e1a2b4329da6
description: office 365에서는 BitLocker 및 DKM (분산 키 관리자)를 통해 사용 하도록 설정 되는 초기 볼륨 수준 암호화와 함께 Exchange의 데이터를 포함 하 여 office 365의 고객 콘텐츠에 대 한 응용 프로그램 수준에 추가 된 암호화 계층을 제공 합니다. 온라인, 비즈니스용 Skype, SharePoint Online 및 비즈니스용 OneDrive 이를 서비스 암호화 라고 합니다.
ms.openlocfilehash: a9001db0f63183bf4694dfc880ab0940309d0375
ms.sourcegitcommit: f57b4001ef1327f0ea622e716a4d7d78f1769b49
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/23/2019
ms.locfileid: "30216508"
---
# <a name="service-encryption-with-customer-key-for-office-365-faq"></a><span data-ttu-id="3acc6-104">Office 365의 고객 키를 사용한 서비스 암호화 관련 자주하는 질문</span><span class="sxs-lookup"><span data-stu-id="3acc6-104">Service encryption with Customer Key for Office 365 FAQ</span></span>

<span data-ttu-id="3acc6-p102">office 365에서는 BitLocker 및 DKM (분산 키 관리자)를 통해 사용 하도록 설정 되는 초기 볼륨 수준 암호화와 함께 Exchange의 데이터를 포함 하 여 office 365의 고객 콘텐츠에 대 한 응용 프로그램 수준에 추가 된 암호화 계층을 제공 합니다. 온라인, 비즈니스용 Skype, SharePoint Online 및 비즈니스용 OneDrive 이를 서비스 암호화 라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p102">In addition to the baseline, volume-level encryption that's enabled through BitLocker and Distributed Key Manager (DKM), Office 365 offers an added layer of encryption at the application level for customer content in Office 365, including data from Exchange Online, Skype for Business, SharePoint Online, and OneDrive for Business. This is called service encryption.</span></span>
  
<span data-ttu-id="3acc6-p103">고객 키는 서비스 암호화를 기반으로 하며, [OST (온라인 서비스 약관)](https://www.microsoft.com/en-us/Licensing/product-licensing/products.aspx)에 설명 된 대로 Office 365에서 휴지 상태의 데이터를 암호화 하는 데 사용 되는 키를 제공 하 고 제어할 수 있습니다. 고객 키는 Office 365에서 데이터 암호를 해독 하는 데 사용 하는 암호화 키를 제어 하므로 준수 의무를 달성 하는 데 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p103">Customer Key is built on service encryption and enables you to provide and control keys that are used to encrypt your data at rest in Office 365 as described in the [Online Services Terms (OST)](https://www.microsoft.com/en-us/Licensing/product-licensing/products.aspx). Customer Key helps you meet compliance obligations because you control the encryption keys that Office 365 uses to decrypt data.</span></span>
  
<span data-ttu-id="3acc6-109">설명서를 포함 하 여 고객 키에 대 한 의견을 제공 하려면 아이디어, 제안 사항 및 전망을 customerkeyfeedback@microsoft.com으로 전송 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-109">To provide feedback on Customer Key, including the documentation, send your ideas, suggestions, and perspectives to customerkeyfeedback@microsoft.com.</span></span>
  
## <a name="what-is-service-encryption-with-customer-key"></a><span data-ttu-id="3acc6-110">고객 키를 사용한 서비스 암호화 란?</span><span class="sxs-lookup"><span data-stu-id="3acc6-110">What is service encryption with Customer Key?</span></span>

<span data-ttu-id="3acc6-p104">고객 키를 사용 하면 클라우드 서비스 공급자와의 키 배치를 지정 하는 규정 준수 요구 사항을 충족 하는 조직의 기능을 향상 시킬 수 있습니다. 고객 키를 사용 하 여 응용 프로그램 수준에서 Office 365 데이터에 대 한 암호화 키를 제공 하 고 제어할 수 있습니다. 따라서 서비스 종료를 결정 해야 하는 경우 조직의 키를 제어 하 고 해지할 수 있습니다. 키를 해지 하면 서비스에서 데이터를 읽을 수 없게 됩니다. 키 해지가 데이터 삭제 경로에 대 한 첫 번째 단계입니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p104">Customer Key enhances the ability of your organization to meet the demands of compliance requirements that specify key arrangements with the cloud service provider. With Customer Key, you provide and control the encryption keys for your Office 365 data at-rest at the application level. As a result, you may exercise control and revoke your organization's keys, should you decide to exit the service. By revoking the keys, the data is unreadable to the service. Key revocation is the first step on the path towards data deletion.</span></span>

## <a name="what-office-365-data-at-rest-is-covered-by-customer-key"></a><span data-ttu-id="3acc6-116">나머지 Office 365 데이터는 고객 키에 따라 적용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-116">What Office 365 data at rest is covered by Customer Key?</span></span>
<span data-ttu-id="3acc6-117"><a name="WhatDataIsCoveredbyCustomerKey"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-117"></span></span>

<span data-ttu-id="3acc6-p105">SharePoint Online 사이트 콘텐츠 및 해당 사이트에 저장 된 파일 및 비즈니스용 OneDrive에 업로드 된 파일에 대해 설명 합니다. Exchange Online 사서함 콘텐츠 (전자 메일 본문, 일정 항목 및 전자 메일 첨부 파일의 콘텐츠)에 대해 설명 합니다. 비즈니스용 skype의 텍스트 대화에 적용 되지만, skype 모임 브로드캐스트 기록과 skype 모임 콘텐츠 업로드에 대해서는 다루지 않습니다. skype 모임 브로드캐스트 및 skype 모임 콘텐츠 업로드는 Office 365의 다른 모든 콘텐츠와 함께 암호화 되지만 현재는 암호화 키에 대 한 고객 제어를 제공 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p105">SharePoint Online site content and the files stored on that site and files uploaded to OneDrive for Business are covered. Exchange Online mailbox content (e-mail body, calendar entries, and content of email attachments) is covered. Text conversations from Skype for Business are covered, but Skype Meeting Broadcast recordings and Skype Meeting content uploads are not covered. Skype Meeting Broadcast and Skype Meeting content uploads are encrypted along with all other content in Office 365, but we currently don't offer customer control of the encryption keys.</span></span>
  
## <a name="what-is-the-difference-between-customer-key-and-bring-your-own-key-byok-with-azure-information-protection-for-exchange-online"></a><span data-ttu-id="3acc6-122">고객 키와 원격 키 (byok)를 사용 하 여 Exchange Online에 대 한 Azure Information Protection이 어떻게 다릅니까?</span><span class="sxs-lookup"><span data-stu-id="3acc6-122">What is the difference between Customer Key and Bring Your Own Key (BYOK) with Azure Information Protection for Exchange Online?</span></span>
<span data-ttu-id="3acc6-123"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-123"></span></span>

<span data-ttu-id="3acc6-p106">두 옵션을 모두 사용 하면 자체 암호화 키를 제공 하 고 제어할 수 있습니다. 그러나 고객 키를 사용한 서비스 암호화는 rest의 Office 365 서버에 상주 하는 휴지 상태의 데이터를 암호화 하 고, Exchange Online에 대 한 Azure Information Protection을 사용 하는 경우에는 전송 된 데이터를 암호화 하 고 지속적인 온라인 및 오프 라인 기능을 제공 합니다. Office 365의 전자 메일 메시지 및 첨부 파일을 보호 합니다. 고객 키 및 Azure Information Protection with Exchange Online은 상호 보완적 이며 Microsoft의 서비스 관리 키 또는 자체 키를 사용 하도록 선택 하는 경우에는 rest 및 전송 중인 데이터를 암호화 하는 것이 추가 보호 기능을 제공할 수 있습니다. 악의적인 공격</span><span class="sxs-lookup"><span data-stu-id="3acc6-p106">Both options enable you to provide and control your own encryption keys; however, service encryption with Customer Key encrypts your data at rest, residing in Office 365 servers at-rest, while BYOK with Azure Information Protection for Exchange Online encrypts your data-in-transit and provides persistent online and offline protection for email messages and attachments for Office 365. Customer Key and BYOK with Azure Information Protection for Exchange Online are complementary, and whether you choose to use Microsoft's service-managed keys or your own keys, encrypting your data-at-rest and in-transit can provide added protection from malicious attacks.</span></span>
  
<span data-ttu-id="3acc6-126">Office 365 메시지 암호화 기능에서는 Exchange Online에 대 한 Azure Information Protection의 byok가 제공 됩니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-126">BYOK with Azure Information Protection for Exchange Online is offered in the Office 365 Message Encryption capabilities.</span></span>
  
## <a name="does-office-365-message-encryption-and-bring-your-own-key-with-azure-information-protection-change-microsofts-approach-to-third-party-data-requests-such-as-subpoenas"></a><span data-ttu-id="3acc6-127">Office 365 메시지 암호화를 수행 하 고 Azure Information Protection을 사용 하 여 사용자의 키 가져오기 subpoenas와 같은 타사 데이터 요청에 대 한 Microsoft의 접근 방식을 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-127">Does Office 365 Message Encryption and Bring Your Own Key with Azure Information Protection change Microsoft's approach to third-party data requests such as subpoenas?</span></span>
<span data-ttu-id="3acc6-128"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-128"></span></span>

<span data-ttu-id="3acc6-p107">아니요. Office 365 메시지 암호화 및 Azure Information Protection (aip)에 대 한 개인 키 (byok)를 제공 하 고 제어 하는 옵션은 사법 기관에 대응 하도록 설계 되지 않았습니다. Office 365 메시지 암호화 온-aip가 내부 또는 외부 규정 준수 의무를 충족 해야 하는 규정 준수 중심 고객을 위해 설계 되었습니다. Microsoft는 고객 데이터에 대 한 타사 요청을 매우 심각 하 게 수행 합니다. 클라우드 서비스 공급자는 항상 고객 데이터에 대 한 개인 정보를 제공 합니다. 소환장이 발생 하는 경우에는 항상 제 3 자가 고객에 게 리디렉션되어 정보를 얻도록 시도 합니다. (정부 Smith의 블로그에서 [고객 데이터 보호 스누핑](https://blogs.microsoft.com/blog/2013/12/04/protecting-customer-data-from-government-snooping/))를 읽어 보십시오. [여기](https://www.microsoft.com/en-us/trustcenter/Privacy/govt-requests-for-data)에서 받은 요청의 세부 정보를 주기적으로 게시 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p107">No. Office 365 Message Encryption and the option to provide and control your own encryption keys with Bring Your Own Key (BYOK) for Azure Information Protection (AIP) was not designed to respond to law enforcement subpoenas. Office 365 Message Encryption with BYOK for AIP was designed for compliance focused customers that need to meet their internal or external compliance obligations. Microsoft takes third-party requests for customer data very seriously. As a cloud service provider, we always advocate for the privacy of customer data. In the event we get a subpoena, we always attempt to redirect the third party to the customer to obtain the information. (Please read Brad Smith's blog: [Protecting customer data from government snooping](https://blogs.microsoft.com/blog/2013/12/04/protecting-customer-data-from-government-snooping/)). We periodically publish detailed information of the request we receive [here](https://www.microsoft.com/en-us/trustcenter/Privacy/govt-requests-for-data).</span></span>
  
<span data-ttu-id="3acc6-137">자세한 내용은 [온라인 서비스 약관 (OST) ](https://www.microsoft.com/en-us/Licensing/product-licensing/products.aspx)의 "고객 데이터 공개" 및 타사 데이터 요청과 관련 된 [Microsoft 보안 센터](https://www.microsoft.com/en-us/trustcenter/default.aspx) 를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="3acc6-137">See the [Microsoft Trust Center](https://www.microsoft.com/en-us/trustcenter/default.aspx) regarding third-party data requests and "Disclosure of Customer Data" in the [Online Services Terms (OST) ](https://www.microsoft.com/en-us/Licensing/product-licensing/products.aspx)for more information.</span></span>
  
## <a name="does-service-encryption-with-customer-key-change-microsofts-approach-to-third-party-data-requests-such-as-subpoenas"></a><span data-ttu-id="3acc6-138">고객 키를 사용한 서비스 암호화는 subpoenas와 같은 타사 데이터 요청에 대 한 Microsoft의 접근 방식을 변경 합니까?</span><span class="sxs-lookup"><span data-stu-id="3acc6-138">Does service encryption with Customer Key change Microsoft's approach to third-party data requests such as subpoenas?</span></span>
<span data-ttu-id="3acc6-139"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-139"></span></span>

<span data-ttu-id="3acc6-p108">아니요. 고객 키가 법률 집행 하위 poenas에 응답 하도록 설계 되지 않았습니다. 이는 규제 고객이 내부 또는 외부 규정 준수 의무를 충족 하도록 설계 되었습니다. Microsoft는 고객 데이터에 대 한 타사 요청을 매우 심각 하 게 수행 합니다. 클라우드 서비스 공급자는 항상 고객 데이터에 대 한 개인 정보를 제공 합니다. 소환장이 발생 하는 경우에는 항상 제 3 자가 고객에 게 리디렉션되어 정보를 얻도록 시도 합니다. (정부 Smith의 블로그에서 [고객 데이터 보호 스누핑](http://blogs.microsoft.com/blog/2013/12/04/protecting-customer-data-from-government-snooping/))를 읽어 보십시오. [여기](https://www.microsoft.com/en-us/trustcenter/Privacy/govt-requests-for-data)에서 받은 요청의 세부 정보를 주기적으로 게시 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p108">No. Customer Key was not designed to respond to law enforcement subpoenas. It was designed for regulated customers to meet their internal or external compliance obligations. Microsoft takes third-party requests for customer data very seriously. As a cloud service provider, we always advocate for the privacy of customer data. In the event we get a subpoena, we always attempt to redirect the third party to the customer to obtain the information. (Please read Brad Smith's blog: [Protecting customer data from government snooping](http://blogs.microsoft.com/blog/2013/12/04/protecting-customer-data-from-government-snooping/)). We periodically publish detailed information of the request we receive [here](https://www.microsoft.com/en-us/trustcenter/Privacy/govt-requests-for-data).</span></span>
  
<span data-ttu-id="3acc6-148">자세한 내용은 [온라인 서비스 약관 (OST)](https://www.microsoft.com/en-us/Licensing/product-licensing/products.aspx) 의 "고객 데이터 공개" 및 타사 데이터 요청과 관련 된 [Microsoft 보안 센터](https://www.microsoft.com/en-us/trustcenter/Privacy/govt-requests-for-data) 를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="3acc6-148">See the [Microsoft Trust Center](https://www.microsoft.com/en-us/trustcenter/Privacy/govt-requests-for-data) regarding third-party data requests and "Disclosure of Customer Data" in the [Online Services Terms (OST)](https://www.microsoft.com/en-us/Licensing/product-licensing/products.aspx) for more information.</span></span> 
  
## <a name="is-fasttrack-support-available-for-implementing-customer-key"></a><span data-ttu-id="3acc6-149">fasttrack에서 고객 키를 구현 하는 데 사용할 수 있나요?</span><span class="sxs-lookup"><span data-stu-id="3acc6-149">Is FastTrack support available for implementing Customer Key?</span></span>
<span data-ttu-id="3acc6-150"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-150"></span></span>

<span data-ttu-id="3acc6-p109">아니요. fasttrack은 고객 키를 등록 하는 데 필요한 테 넌 트 및 서비스 구성 정보를 수집 하는 경우에만 사용 됩니다. 고객 키 제공은 fasttrack을 통해 게시 되므로 고객 및 파트너가 동일한 방법을 사용 하 여 필요한 정보를 제출 하 고 고객이 제공 하는 데이터를 간편 하 게 보관할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p109">No. FastTrack is only used to collect tenant and service configuration information that is required to register for Customer Key. The Customer Key Offers are published via FastTrack so that it is convenient for customers and partners to submit this required information using the same method and for ease of archiving the data that customers provide in the Offer.</span></span>
  
<span data-ttu-id="3acc6-154">설명서 외에 추가 지원이 필요한 경우에는 MCS (Microsoft 컨설팅 서비스), pfe (프리미어 현장 엔지니어링) 또는 Microsoft 파트너에 게 문의 하세요.</span><span class="sxs-lookup"><span data-stu-id="3acc6-154">If you need additional support beyond the documentation, contact Microsoft Consulting Services (MCS), Premier Field Engineering (PFE), or a Microsoft partner for assistance.</span></span>
  
## <a name="if-my-keys-are-destroyed-how-can-i-recover"></a><span data-ttu-id="3acc6-155">내 키가 파괴 되 면 어떻게 복구할 수 있나요?</span><span class="sxs-lookup"><span data-stu-id="3acc6-155">If my keys are destroyed, how can I recover?</span></span>
<span data-ttu-id="3acc6-156"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-156"></span></span>

<span data-ttu-id="3acc6-p110">가용성 키는 관리 하는 루트 키의 예기치 않은 손실에서 복구할 수 있는 기능을 제공 합니다. 루트 키가 손실 되 면 microsoft 지원 서비스에 문의 하 여 가용성 키를 사용 하도록 설정 하는 프로세스를 지원 해 드릴 수 있습니다. 가용성 키를 사용 하 여 사용자가 프로 비전 한 새 키를 사용 하 여 새 데이터 암호화 정책으로 마이그레이션합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p110">The availability key provides you with the capability to recover from the unanticipated loss of root keys that you manage. If you lose your root keys, contact Microsoft Support and Microsoft will assist you through the process of enabling the availability key. You'll use the availability key to migrate to a new Data Encryption Policy with new keys provisioned by you.</span></span> 
  
## <a name="what-is-the-availability-key"></a><span data-ttu-id="3acc6-160">가용성 키는?</span><span class="sxs-lookup"><span data-stu-id="3acc6-160">What is the availability key?</span></span>
<span data-ttu-id="3acc6-161"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-161"></span></span>

<span data-ttu-id="3acc6-p111">가용성 키는 데이터 암호화 정책을 만들 때 프로 비전 되는 루트 키입니다. 가용성 키는 Office 365 내에서 저장 및 보호 되며, 고객 키에 대 한 서비스 암호화와 함께 사용 하기 위해 제공 되는 두 가지 루트 키와 기능적으로 비슷합니다. Azure 키 자격 증명 모음에서 제공 하 고 관리 하는 키와 달리 가용성 키에 직접 액세스할 수 없습니다. 가용성 키에 대 한 저장소 및 제어는 다음과 같은 세 가지 이유로 인해 고의적으로 azure 키 보관소와는 다릅니다. 먼저 가용성 키는 Office 365 서비스가 Azure 키에 호스트 되는 키에 연결할 수 없는 경우 고가용성 기능을 제공 합니다. 보관소가 둘째로, 두 Azure 키 자격 증명 모음 키가 손실 될 경우 가용성 키가 "중단 유리" 기능을 제공 합니다. 셋째, 논리 컨트롤을 분리 하면 단일 공격이 나 실패 지점에서 모든 키가 손실 되는 것을 방지 하 고 심층 방어를 제공할 수도 있습니다. 키를 보호 하는 데 있어 주요 관리를 위한 다양 한 보호 및 프로세스를 사용 하면서 모든 키 (즉, 데이터)가 손실 되거나 소멸 될 위험을 줄일 수 있습니다. Microsoft는 가용성 키가 소멸 되는 것을 단독으로 제공 합니다. Microsoft의 가용성 키에 대 한 액세스 권한이 있는 아무도 Office 365 서비스 코드 에서만 액세스할 수 있도록 디자인 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p111">The availability key is a root key that is provisioned when you create a data encryption policy. The availability key is stored and protected within Office 365 and is functionally similar to the two root keys that are supplied by you for use with service encryption with Customer Key. Unlike the keys that you provide and manage in Azure Key Vault, you can't directly access the availability key. Storage and control of the availability key are deliberately different from Azure Key Vault keys for three reasons: first, the availability key provides a high-availability capability in the event that Office 365 services are unable to reach keys hosted in Azure Key Vault; second, the availability key provides a "break glass" capability in the event that both Azure Key Vault keys are lost; and third, the separation of logical controls provides defense-in-depth and protects against the loss of all keys from a single attack or point of failure. Sharing the responsibility to protect the keys, while using a variety of protections and processes for key management, ultimately reduces the risk that all keys (and therefore your data) will be lost or destroyed. Microsoft provides you with sole authority over the destruction of the availability key. By design, no one at Microsoft has access to the availability key - it is only accessible by Office 365 service code.</span></span>
  
## <a name="how-many-data-encryption-policies-deps-can-i-create"></a><span data-ttu-id="3acc6-169">얼마나 많은 데이터 암호화 정책 (deps)을 만들 수 있나요?</span><span class="sxs-lookup"><span data-stu-id="3acc6-169">How many data encryption policies (DEPs) can I create?</span></span>
<span data-ttu-id="3acc6-170"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-170"></span></span>

 <span data-ttu-id="3acc6-171">**Exchange Online 및 비즈니스용 Skype:** 최대 50 deps를 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-171">**Exchange Online and Skype for Business:** You can create up to 50 DEPs.</span></span> 
  
 <span data-ttu-id="3acc6-p112">**SharePoint Online 및 비즈니스용 OneDrive:** DEP는 지리적 위치 (geo 라고도 함)의 데이터에 적용 됩니다. Office 365의 다중 지역 기능을 사용 하는 경우에는 각 지역에 따라 하나의 DEP를 만들 수 있습니다. 다중 geo를 사용 하지 않는 경우에는 하나의 DEP를 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p112">**SharePoint Online and OneDrive for Business:** A DEP applies to data in one geographic location, also called a geo. If you use the multi-geo feature of Office 365, you can create one DEP per geo. If you are not using multi-geo, you can create one DEP.</span></span>
  
## <a name="can-i-assign-a-data-encryption-policy-before-migrating-a-mailbox-to-the-cloud"></a><span data-ttu-id="3acc6-175">사서함을 클라우드로 마이그레이션하기 전에 데이터 암호화 정책을 할당할 수 있나요?</span><span class="sxs-lookup"><span data-stu-id="3acc6-175">Can I assign a data encryption policy before migrating a mailbox to the cloud?</span></span>
<span data-ttu-id="3acc6-176"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-176"></span></span>

<span data-ttu-id="3acc6-p113">예로. Windows PowerShell cmdlet 설정-mailuser를 사용 하 여 사서함을 Office 365로 마이그레이션하기 전에 사용자에 게 DEP (데이터 암호화 정책)를 할당할 수 있습니다. 이렇게 하면 콘텐츠가 마이그레이션될 때 할당 된 DEP를 사용 하 여 사서함의 내용이 암호화 됩니다. 이 방법을 사용 하면 사서함이 이미 마이그레이션된 후에 DEP를 할당 하는 것 보다 더 효율적으로 수행할 수 있으며,이 경우 암호화가 수행 되기를 기다린 후 시간이 나 일이 걸릴 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p113">Yes. You can use the Windows PowerShell cmdlet Set-MailUser to assign a data encryption policy (DEP) to the user prior to migrating the mailbox to Office 365. When you do this, the contents of the mailbox will be encrypted using the assigned DEP as the content is migrated. This can be more efficient than assigning a DEP after the mailbox has already been migrated and then waiting for encryption to take place, which can take hours or possibly days.</span></span> 
  
## <a name="how-do-i-verify-that-encryption-with-customer-key-is-activated-and-office-365-has-finished-encrypting-with-customer-key"></a><span data-ttu-id="3acc6-181">고객 키를 사용한 암호화가 정품 인증 되 고 Office 365에서 고객 키 암호화가 완료 되었는지 확인 하는 방법은 무엇 인가요?</span><span class="sxs-lookup"><span data-stu-id="3acc6-181">How do I verify that encryption with Customer Key is activated and Office 365 has finished encrypting with Customer Key?</span></span>
<span data-ttu-id="3acc6-182"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-182"></span></span>

 <span data-ttu-id="3acc6-p114">**Exchange Online 및 비즈니스용 Skype:** [원격 PowerShell을 사용 하 여 Exchange Online에 연결한](https://technet.microsoft.com/en-us/library/jj984289%28v=exchg.160%29.aspx) 다음 확인할 각 사서함에 대해 **[get-mailboxstatistics]** cmdlet을 사용할 수 있습니다. get-mailboxstatistics cmdlet의 출력에서 _IsEncrypted_ 속성은 사서함이 암호화 된 경우 **true** 값을 반환 하 고 그렇지 않은 경우 **false** 값으로 설정 합니다. 사서함이 암호화 된 경우 _dataencryptionpolicyid_ 속성에 대해 반환 되는 값은 사서함이 암호화 된 DEP의 GUID입니다. 이 cmdlet을 실행 하는 방법에 대 한 자세한 내용은 [Get-get-mailboxstatistics](https://technet.microsoft.com/en-us/library/bb124612%28v=exchg.160%29.aspx) 및 using PowerShell with Exchange Online을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p114">**Exchange Online and Skype for Business:** You can [connect to Exchange Online using remote PowerShell](https://technet.microsoft.com/en-us/library/jj984289%28v=exchg.160%29.aspx) and then use the **[Get-MailboxStatistics]** cmdlet for each mailbox that you want to check. In the output from the Get-MailboxStatistics cmdlet, the  _IsEncrypted_ property returns a value of **true** if the mailbox is encrypted and a value of **false** if it's not. If the mailbox is encrypted, the value returned for the  _DataEncryptionPolicyID_ property is the GUID of the DEP with which the mailbox is encrypted. For more information on running this cmdlet, see [Get-MailboxStatistics](https://technet.microsoft.com/en-us/library/bb124612%28v=exchg.160%29.aspx) and using PowerShell with Exchange Online.</span></span> 
  
<span data-ttu-id="3acc6-p115">사서함이 DEP를 할당 한 시간부터 72 시간을 기다린 후 암호화 되지 않으면 사서함 이동을 시작 합니다. 이렇게 하려면 [원격 PowerShell을 사용 하 여 Exchange Online에 연결한](https://technet.microsoft.com/en-us/library/jj984289%28v=exchg.160%29.aspx) 다음 new-moverequest cmdlet을 사용 하 여 다음과 같이 사서함의 별칭을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p115">If the mailboxes aren't encrypted after waiting 72 hours from the time you assigned the DEP, initiate a mailbox move. To do this, [connect to Exchange Online using remote PowerShell](https://technet.microsoft.com/en-us/library/jj984289%28v=exchg.160%29.aspx) and then use the New-MoveRequest cmdlet and provide the alias of the mailbox as follows:</span></span> 
  
```
New-MoveRequest <alias>
```

 <span data-ttu-id="3acc6-p116">**SharePoint Online 및 비즈니스용 OneDrive:** [SharePoint Online PowerShell에 연결한](https://technet.microsoft.com/en-us/library/fp161372.aspx)다음 **[SPODataEncryptionPolicy]** cmdlet을 사용 하 여 테 넌 트의 상태를 확인할 수 있습니다. 고객 키 암호화가 사용 되 고 모든 사이트의 모든 파일이 암호화 된 경우 \* \* _State_\* \* 속성은 **등록** 값을 반환 합니다. 암호화가 아직 진행 중인 경우이 cmdlet은 완료 된 사이트 비율에 대 한 정보를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p116">**SharePoint Online and OneDrive for Business:** You can [connect to SharePoint Online PowerShell](https://technet.microsoft.com/en-us/library/fp161372.aspx), and then use the **[Get-SPODataEncryptionPolicy]** cmdlet to check the status of your tenant. The \*\* _State_\*\* property returns a value of **registered** if Customer Key encryption is enabled and all files in all sites have been encrypted. If encryption is still in progress, this cmdlet provides information on what percentage of sites is complete.</span></span> 
  
## <a name="if-i-want-to-switch-to-a-different-set-of-keys-how-long-does-it-take-for-the-new-set-of-keys-to-protect-my-data"></a><span data-ttu-id="3acc6-192">다른 키 집합으로 전환 하려는 경우에는 데이터를 보호 하기 위해 새 키 집합에 어떤 시간이 걸립니까?</span><span class="sxs-lookup"><span data-stu-id="3acc6-192">If I want to switch to a different set of keys, how long does it take for the new set of keys to protect my data?</span></span>
<span data-ttu-id="3acc6-193"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-193"></span></span>

 <span data-ttu-id="3acc6-194">**Exchange Online 및 비즈니스용 Skype:** 새 dep가 사서함에 할당 된 시간부터 새 dep (데이터 암호화 정책)에 따라 사서함을 보호 하는 데 최대 72 시간이 걸릴 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-194">**Exchange Online and Skype for Business:** It can take up to 72 hours to protect a mailbox according to a new Data Encryption Policy (DEP) from the time the new DEP is assigned to the mailbox.</span></span> 
  
 <span data-ttu-id="3acc6-195">**SharePoint Online 및 비즈니스용 OneDrive:** 새 키가 할당 되 면 전체 테 넌 트를 다시 암호화 하는 데 최대 4 시간이 걸릴 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-195">**SharePoint Online and OneDrive for Business:** It can take up to four hours to re-encrypt your entire tenant once a new key has been assigned.</span></span> 
  
## <a name="is-my-existing-data-stored-without-encryption-at-any-time-while-it-is-decrypted-or-encrypted-with-customer-key"></a><span data-ttu-id="3acc6-196">고객 키를 사용 하 여 암호를 해독 하거나 암호화 한 경우 언제 든 지 기존 데이터를 암호화 없이 저장 합니까?</span><span class="sxs-lookup"><span data-stu-id="3acc6-196">Is my existing data stored without encryption at any time while it is decrypted or encrypted with Customer Key?</span></span>
<span data-ttu-id="3acc6-197"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-197"></span></span>

<span data-ttu-id="3acc6-p117">아니요. 데이터는 항상 BitLocker 및 DKM를 사용 하는 Office 365 서비스의 나머지 부분에서 암호화 됩니다. 자세한 내용은 "Office 365의 보안, 개인 정보 및 준수 정보" 및 [Exchange Online에서 전자 메일 암호를 보호 하는 방법을](https://support.office.com/article/989BA10C-F73F-4EFB-AD1B-AF3322E5F376)참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p117">No. Your data is always encrypted at rest in the Office 365 service with BitLocker and DKM. For more information, see the "Security, Privacy, and Compliance Information for Office 365", and [How Exchange Online secures your email secrets](https://support.office.com/article/989BA10C-F73F-4EFB-AD1B-AF3322E5F376).</span></span>
  
## <a name="if-i-no-longer-want-to-use-customer-managed-encryption-keys-can-i-switch-to-microsoft-managed-keys"></a><span data-ttu-id="3acc6-201">고객 관리 암호화 키를 더 이상 사용 하지 않으려는 경우 Microsoft 관리 되는 키로 전환할 수 있나요?</span><span class="sxs-lookup"><span data-stu-id="3acc6-201">If I no longer want to use customer-managed encryption keys, can I switch to Microsoft-managed keys?</span></span>
<span data-ttu-id="3acc6-202"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-202"></span></span>

 <span data-ttu-id="3acc6-p118">**Exchange Online 및 비즈니스용 Skype:** 아직 아니에요. 이 기능은 Office 365에서 Microsoft 관리 키가 포함 된 서비스 암호화가 광범위 하 게 수행 되는 경우 지원 됩니다. 고객 키를 사용 하 여 서비스 암호화를 해제 한 후 서비스에서이를 롤아웃할 것으로 기대 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p118">**Exchange Online and Skype for Business:** Not yet. This will be supported once service encryption in Office 365 with Microsoft-managed keys is rolled out broadly. We expect to roll this out in the service after we release service encryption with Customer Key.</span></span> 
  
 <span data-ttu-id="3acc6-p119">**SharePoint Online 및 비즈니스용 OneDrive:** 예로. 다중 지역 기능을 사용 하는 경우에는 각 지역에 대해 Microsoft 관리 키를 별도로 사용 하거나 단일 지리적에 있는 모든 데이터에 대해 개별적으로 되돌리기를 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p119">**SharePoint Online and OneDrive for Business:** Yes. You can choose to revert to using Microsoft-managed keys separately for each geo (if you use the multi-geo feature) or for all your data if it is in a single geo.</span></span> 
  
## <a name="if-i-lose-my-keys-how-long-does-it-take-to-recover-service-availability-using-the-recovery-key"></a><span data-ttu-id="3acc6-208">키를 잃어 버리면 복구 키를 사용 하 여 서비스 가용성을 복구 하는 데 어느 정도의 시간이 걸립니까?</span><span class="sxs-lookup"><span data-stu-id="3acc6-208">If I lose my keys, how long does it take to recover service availability using the recovery key?</span></span>
<span data-ttu-id="3acc6-209"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-209"></span></span>

 <span data-ttu-id="3acc6-210">**Exchange Online 및 비즈니스용 Skype:** 가용성 키를 사용 하기 위해 전화를 걸려면 몇 분 내에 사서함에 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-210">**Exchange Online and Skype for Business:** Once you call in to use the availability key, mailboxes will be accessible within minutes.</span></span> 
  
 <span data-ttu-id="3acc6-p120">**SharePoint Online 및 비즈니스용 OneDrive:** 이 작업은 보유 하 고 있는 사이트 수에 비례 합니다. Microsoft에 전화를 걸어 가용성 키를 사용 하는 경우 약 4 시간 이내에 완벽 하 게 온라인 상태가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p120">**SharePoint Online and OneDrive for Business:** This operation is proportional to the number of sites you have. Once you call Microsoft to use the availability key, you will be fully online within about four hours.</span></span> 
  
## <a name="how-is-the-availability-key-used-with-exchange-online"></a><span data-ttu-id="3acc6-213">Exchange Online에서 가용성 키를 사용 하는 방법</span><span class="sxs-lookup"><span data-stu-id="3acc6-213">How is the availability key used with Exchange Online?</span></span>
<span data-ttu-id="3acc6-214"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-214"></span></span>

<span data-ttu-id="3acc6-215">가용성 키를 Exchange Online과 함께 사용 하는 방법에는 세 가지가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-215">There are three ways that the availability key is used with Exchange Online:</span></span>
  
- <span data-ttu-id="3acc6-216">Azure 키 자격 증명 모음 키에 연결할 수 없는 경우 서비스 가용성이 제공 됩니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-216">Service availability - in the event that Azure Key Vault keys are unreachable.</span></span>
    
- <span data-ttu-id="3acc6-217">Office 365 서비스 코드에서 시작 된 작업 (예: 검색 인덱스 만들기 또는 사서함 이동)</span><span class="sxs-lookup"><span data-stu-id="3acc6-217">Actions initiated by Office 365 service code - such as search index creation or mailbox moves.</span></span>
    
- <span data-ttu-id="3acc6-218">단일 DEP와 연결 된 두 Azure 키 자격 증명 키 손실 같은 키 손실에서 복구 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-218">Recover from key loss - such as the loss of both Azure Key Vault keys associated with a single DEP.</span></span>
    
 <span data-ttu-id="3acc6-219">**Azure key Vault 키에서 서비스 가용성에 대 한 가용성 키를 사용할 수 없습니다.**</span><span class="sxs-lookup"><span data-stu-id="3acc6-219">**Using the availability key for service availability in the event Azure Key Vault keys are unreachable.**</span></span>
  
<span data-ttu-id="3acc6-p121">Office 365에서는 가용성 키를 사용 하 여 서비스 가용성과 Exchange Online에 대 한 비정상 고객 키 상태 로부터의 복구를 모두 지원 합니다. 고객 키에 사용 되는 키 계층 구조가 있습니다. 다음 그림에서는이 계층 구조를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p121">Office 365 uses the availability key both for service availability and recovery from an unhealthy Customer Key state for Exchange Online. There is a hierarchy of keys used by Customer Key. This hierarchy is illustrated in the following figure.</span></span>
  
![](media/a760156b-737f-469a-80ab-c28b7a8b9160.png)
  
<span data-ttu-id="3acc6-p122">단일 DEP (데이터 암호화 정책)의 Azure 키 보관소 키를 모두 사용할 수 없으면 office 365에서 가용성 키를 사용 하 여 새 DEP로 변경할 수 있습니다. office 365은에 따라 사용자 시작 활동 (예: 사용자가 Outlook 클라이언트에 전자 메일을 다운로드 하거나, 인덱싱 사서함 내용과 같은 시스템 시작 활동 또는 eDiscovery 검색에 대해 프로세스를 트리거한 경우)</span><span class="sxs-lookup"><span data-stu-id="3acc6-p122">If both Azure Key Vault keys of a single Data Encryption Policy (DEP) are unavailable, Office 365 can use the availability key to change to a new DEP. Office 365 determines whether to use the availability key for service availability differently depending on whether a user-initiated activity, for example, when a user downloads email to the Outlook client, or a system-initiated activity, such as indexing mailbox contents, or for eDiscovery searches, triggered the process.</span></span>
  
<span data-ttu-id="3acc6-225">사용자 사서함에 대 한 가용성 키를 사용할지 여부를 결정 하기 위해 사용자가 시작한 작업에 대 한 응답으로 Office 365에서이 프로세스를 팔 로우 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-225">Office 365 follows this process in response to user-initiated actions to determine whether to use the availability key for user mailboxes:</span></span>
  
1. <span data-ttu-id="3acc6-226">Office 365에서는 Azure 키 자격 증명 모음에서 두 고객 키의 위치를 확인 하기 위해 사서함이 할당 되는 DEP를 읽습니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-226">Office 365 reads the DEP to which the mailbox is assigned in order to determine the location of the two customer keys in Azure Key Vault.</span></span>
    
2. <span data-ttu-id="3acc6-227">Office 365은 dep에서 두 개의 고객 키 중 하나를 선택 하 고 Azure key Vault에 요청을 보내 고객 키를 사용 하 여 DEP 키를 래핑 해제 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-227">Office 365 randomly chooses one of the two customer keys from the DEP and sends a request to Azure Key Vault to unwrap the DEP key using the customer key.</span></span>
    
3. <span data-ttu-id="3acc6-228">고객 키를 사용 하 여 DEP 키의 래핑을 해제 하는 요청이 실패 하 고 오류가 반환 되 면 Office 365에서 Azure 키 보관소에 두 번째 요청을 전송 하 여 대체 (두 번째) 고객 키를 사용 하도록 지시 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-228">If the request to unwrap the DEP key using the customer key fails and returns an error, Office 365 sends a second request to Azure Key Vault, this time instructing it to use the alternate (second) customer key.</span></span>
    
4. <span data-ttu-id="3acc6-229">고객 키를 사용 하 여 DEP 키의 래핑을 해제 하 라는 두 번째 요청이 실패 하 고 오류를 반환 하는 경우 Office 365에서 두 요청의 결과를 검사 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-229">If the second request to unwrap the DEP key using the customer key fails and returns an error, Office 365 examines the results of both requests:</span></span>
    
  - <span data-ttu-id="3acc6-p123">검사 결과, 오류에 따라 고객 id의 명시적 동작이 반영 되지 않는 것으로 확인 되 면 Office 365에서 availability 키를 사용 하 여 DEP 키를 해독 합니다. 그런 다음이 DEP 키를 사용 하 여 사서함 키의 암호를 해독 하 고 사용자 요청을 완료 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p123">If the examination determines that the errors DO NOT reflect an explicit action by a customer identity, then Office 365 uses the availability key to decrypt the DEP key. The DEP key is then used to decrypt the mailbox key and complete the user request.</span></span>
    
    <span data-ttu-id="3acc6-p124">이 경우 Azure 키 자격 증명 모음이 어떤 이유로 든 응답할 수 없거나 연결이 불가능 합니다. Office 365에서는 고객이 키에 대 한 액세스를 의도적으로 취소 했는지 여부를 확인할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p124">In this case, Azure Key Vault is either unable to respond or unreachable for whatever reason. Office 365 has no way of determining if the customer has intentionally revoked access to the keys.</span></span>
    
  - <span data-ttu-id="3acc6-234">조사 결과, 고객 키를 사용 하지 않도록 의도적으로 작업을 수행 했음을 나타내는 경우에는 가용성 키를 사용할 수 없으며 사용자 요청이 실패 하 고 사용자에 게 로그인 오류와 같은 오류 메시지가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-234">If the examination indicates that deliberate action has been taken to render the customer keys unavailable, then the availability key will not be used, the user request fails, and the user receives an error message, such as login failure.</span></span>
    
    <span data-ttu-id="3acc6-p125">이 경우 고객은 서비스가 영향을 받게 되 고 고객 키의 조건이 비정상 임을 알게 된다는 것을 알 수 있습니다. 예를 들어 고객이 조직의 모든 사서함에 대해 단일 DEP를 사용 하는 경우 고객이 사용자의 사서함에 액세스할 수 없는 경우 광범위 한 오류가 발생할 수 있습니다. 이렇게 하면 고객 키가 비정상 상태가 되 면 고객은 상황을 수정 하 고 서비스를 정상 상태로 복원할 필요성을 알게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p125">When this happens, the customer is made aware that service is impacted, and the condition of Customer Key is unhealthy. For example, if a customer is using a single DEP for all mailboxes in the organization, the customer may experience a widespread failure where users can't access their mailboxes. This ensures that when both customer keys are unhealthy, the customer is made aware of the need to correct the situation and restore the service to a healthy state.</span></span>
    
 <span data-ttu-id="3acc6-238">**Office 365 서비스 코드에서 시작 하는 작업에 대 한 가용성 키 사용**</span><span class="sxs-lookup"><span data-stu-id="3acc6-238">**Using the availability key for actions initiated by Office 365 service code.**</span></span>
  
<span data-ttu-id="3acc6-p126">Office 365 서비스 코드는 항상 유효한 로그인 토큰을 가지 며 차단 될 수 없습니다. 따라서 가용성 키가 삭제 될 때까지 검색 인덱스 만들기 또는 사서함 이동과 같은 Office 365 서비스 코드로 시작 되는 작업에 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p126">Office 365 service code always has a valid login token and can't be blocked. Therefore, until the availability key has been deleted, it can be used for actions initiated by, or internal to, Office 365 service code, such as search index creation or moving mailboxes.</span></span>
  
 <span data-ttu-id="3acc6-241">**가용성 키를 사용 하 여 키 손실 복구**</span><span class="sxs-lookup"><span data-stu-id="3acc6-241">**Using the availability key to recover from key loss.**</span></span>
  
<span data-ttu-id="3acc6-242">가용성 키를 사용 하 여 FAQ 항목 "키가 소멸 됩니다."를 복구할 수 있습니까? "에 설명 된 것 처럼 동일한 DEP와 연결 된 두 Azure 키 자격 증명 키가 손실 되는 것을 복구할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-242">You can use the availability key to recover from the loss of both Azure Key Vault keys that are associated with the same DEP, as described in the answer to the FAQ entry "If my keys are destroyed, how can I recover?".</span></span>
  
## <a name="how-is-the-availability-key-used-with-sharepoint-online-and-onedrive-for-business"></a><span data-ttu-id="3acc6-243">SharePoint Online 및 비즈니스용 OneDrive에서 가용성 키를 사용 하는 방법은 무엇 인가요?</span><span class="sxs-lookup"><span data-stu-id="3acc6-243">How is the availability key used with SharePoint Online and OneDrive for Business?</span></span>
<span data-ttu-id="3acc6-244"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-244"></span></span>

<span data-ttu-id="3acc6-245">고객 키 및 가용성 키에 대 한 SharePoint online 및 비즈니스용 OneDrive 아키텍처 및 구현은 Exchange online 및 비즈니스용 Skype와 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-245">The SharePoint Online and OneDrive for Business architecture and implementation for Customer Key and availability key are different from Exchange Online and Skype for Business.</span></span>
  
<span data-ttu-id="3acc6-p127">고객이 사용자가 관리 하는 키로 이동 하면 Office 365에서 테 넌 트 관련 중간 키 (tik)를 만듭니다. Office 365에서는 각 고객 키와 함께 tik를 두 번 암호화 하 고 두 가지 암호화 버전의 tik를 저장 합니다. 암호화 된 버전의 tik만 저장 되 고, tik는 customer 키로만 암호를 해독할 수 있습니다. 그런 다음 tik는 사이트 키를 암호화 하는 데 사용 되며, blob 키를 암호화 하는 데 사용 됩니다. blob는 Microsoft Azure Blob 저장소 서비스에 암호화 되 고 저장 됩니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p127">When a customer moves to customer-managed keys, Office 365 creates a tenant-specific intermediate key (TIK). Office 365 encrypts the TIK twice, once with each of the customer keys, and stores the two encrypted versions of the TIK. Only the encrypted versions of the TIK are stored, and a TIK can only be decrypted with the customer keys. The TIK is then used to encrypt site keys, which are then used to encrypt blob keys. The blobs themselves are encrypted and stored in the Microsoft Azure Blob storage service.</span></span>
  
<span data-ttu-id="3acc6-251">Office 365에서 다음 프로세스를 수행 하 여 고객 파일 데이터가 있는 blob에 액세스 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-251">Office 365 follows this process to access a blob that has customer file data:</span></span>
  
1. <span data-ttu-id="3acc6-252">고객 키를 사용 하 여 tik의 암호를 해독 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-252">Decrypt the TIK using the Customer Key.</span></span>
    
2. <span data-ttu-id="3acc6-253">암호 해독 된 tik를 사용 하 여 사이트 키의 암호를 해독 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-253">Use the decrypted TIK to decrypt a site key.</span></span>
    
3. <span data-ttu-id="3acc6-254">암호 해독 된 사이트 키를 사용 하 여 blob 키를 해독 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-254">Use the decrypted site key to decrypt a blob key.</span></span>
    
4. <span data-ttu-id="3acc6-255">해독 된 blob 키를 사용 하 여 blob 암호를 해독 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-255">Use the decrypted blob key to decrypt the blob.</span></span>
    
<span data-ttu-id="3acc6-p128">tik를 해독할 때 Office 365은 약간의 오프셋을 사용 하 여 Azure 키 자격 증명 모음에 두 개의 암호 해독 요청을 보냅니다. 처음에는 검색을 완료 하 여 결과를 제공 다른 요청을 취소 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p128">When decrypting a TIK, Office 365 issues two decryption requests to Azure Key Vault with a slight offset. The first one to finish furnishes the result, canceling the other request.</span></span>
  
<span data-ttu-id="3acc6-p129">고객이 고객 키에 대 한 액세스 권한을 상실 하는 경우에도 Office 365에서 사용 가능한 키를 사용 하 여 tik를 암호화 하 고 각 고객 키로 암호화 된 tik와 함께이를 저장 합니다. 가용성 키를 사용 하 여 암호화 된 tik는 고객이 악의적으로 또는 실수로 키에 대 한 액세스 권한을 손실 했을 때 복구 경로를 등록 해야 하는 경우에만 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p129">In case the customer loses access to their customer keys, Office 365 also encrypts the TIK with an availability key and stores this along with the TIKs encrypted with each customer key. The TIK encrypted with the availability key is used only when the customer calls Microsoft to enlist the recovery path when they have lost access to their keys, maliciously or accidentally.</span></span>
  
<span data-ttu-id="3acc6-p130">가용성 및 확장 상의 이유로, 암호 해독 된 tiks는 시간 제한 메모리 캐시에 캐시 됩니다. tik 캐시가 만료 되도록 설정 되기까지 두 시간이 소요 되 면 Office 365에서 각 tik를 해독 하려고 시도 합니다. tiks를 해독 하면 캐시의 수명이 연장 됩니다. tik 암호 해독에 실패 하는 경우, Office 365는 캐시 만료 전에 엔지니어링에 알리기 위한 경고를 생성 합니다. 고객이 microsoft에서 전화를 건 경우에만 Office 365에서 복구 작업을 시작 하며, microsoft는 암호 해독 된 tik 및 새 집합을 사용 하 여 해당 사용자의 비밀 저장소에 저장 된 가용성 키로 tik를 해독 하 고 테 넌 트를 다시 보 딩 합니다. 고객이 제공한 Azure 키 보관소 키</span><span class="sxs-lookup"><span data-stu-id="3acc6-p130">For availability and scale reasons, decrypted TIKs are cached in a time-limited memory cache. Two hours before a TIK cache is set to expire, Office 365 attempts to decrypt each TIK. Decrypting the TIKs extends the lifetime of the cache. If TIK decryption fails for a significant amount of time, Office 365 generates an alert to notify engineering prior to the cache expiration. Only if the customer calls Microsoft will Office 365 initiate the recovery operation, which involves decrypting the TIK with the availability key stored in Microsoft's secret store and onboarding the tenant again using the decrypted TIK and a new set of customer-supplied Azure Key Vault keys.</span></span>
  
<span data-ttu-id="3acc6-p131">현재로 서는 고객 키가 Azure blob 저장소에 저장 된 sharepoint online 파일 데이터의 암호화 및 암호 해독 체인에 포함 되지만 sharepoint online 목록 항목이 나 SQL 데이터베이스에 저장 된 메타 데이터는 제외 됩니다. Office 365에서는 고객이 시작한 위에 설명 된 사례를 제외 하 고 SharePoint Online 또는 비즈니스용 OneDrive에 대 한 가용성 키를 사용 하지 않습니다. 고객 데이터에 대 한 사용자 액세스는 고객 Lockbox에 의해 보호 됩니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p131">As of today, Customer Key is involved in the encryption and decryption chain of SharePoint Online file data stored in the Azure blob store, but not SharePoint Online list items or metadata stored in the SQL database. Office 365 does not use the availability key for SharePoint Online or OneDrive for Business other than the case described above, which is customer initiated. Human access to customer data is protected by Customer Lockbox.</span></span>
  
## <a name="how-is-customer-key-licensed"></a><span data-ttu-id="3acc6-268">고객 키의 사용이 허가 되는 이유</span><span class="sxs-lookup"><span data-stu-id="3acc6-268">How is Customer Key licensed?</span></span>
<span data-ttu-id="3acc6-269"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-269"></span></span>

<span data-ttu-id="3acc6-p132">고객 키는 Office 365 Enterprise 제품군, "E5" 및 고급 규정 준수 SKU에서 제공 됩니다. 또한 고객은 Azure 키 자격 증명 모음을 사용 하 여 적절 한 라이선스를 구입 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p132">Customer Key is offered in the Office 365 Enterprise Suite, "E5", and the Advanced Compliance SKU. Additionally, customers must also purchase the appropriate license for using Azure Key Vault.</span></span>
  
<span data-ttu-id="3acc6-272">고객 키를 사용 하 여 고객 키를 포함 하려면 각 사용자에 게 benefiting를 부여 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-272">Each user benefiting from Customer Key needs to be licensed if they want to be covered by Customer Key.</span></span>
  
<span data-ttu-id="3acc6-p133">SharePoint Online의 경우, 설치 단계를 수행 하려면 고객 키를 구성 하는 Office 365 관리자에 게 라이선스가 부여 되어야 합니다. 또한이 기능을 사용 하 여 benefiting 사용자에 게 라이선스를 부여 해야 합니다. 여기에는 사이트 소유자 및 고객 키를 통해 암호화 된 하나 이상의 사이트에 있는 파일에 액세스 하는 사용자가 포함 됩니다. 외부 사용자는 고객 키를 사용 하 여 암호화 된 하나 이상의 사이트에 있는 파일에 액세스 하기 위해 사용이 허가 되지 않아도 됩니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p133">For SharePoint Online, the Office 365 Administrator who configures Customer Key also needs to be licensed, to perform the setup steps. Additionally, the users that are benefiting from the feature need to be licensed - this includes the site owner and any users accessing files on one or more sites that are encrypted using Customer Key. External users do not need to be licensed to access files on one or more sites that are encrypted using Customer Key.</span></span>
  
<span data-ttu-id="3acc6-p134">Exchange Online의 경우 "사용자" 사서함 및 "메일 사용자" 사서함의 사용이 허가 되어야 합니다. 공유 사서함과 같은 다른 모든 사용자는 고객 키에 대 한 라이선스를 가질 필요가 없습니다. Exchange Online 사서함이 올바르게 사용이 허가 되었는지 확인 하려면 다음 cmdlet을 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p134">For Exchange Online, "user" mailboxes and "mail user" mailboxes must be licensed. All others, such as shared mailboxes, are not required to have a license for Customer Key. To check that your Exchange Online mailbox is properly licensed, run the following cmdlet:</span></span>
  
```
(Get-Mailbox <alias >).PersistedCapabilities
```

<span data-ttu-id="3acc6-p135">문자열 BPOS_S_EquivioAnalytics 있으면 사서함이 적절 하 게 사용 허가 된 것입니다. 그렇지 않은 경우에는이 사서함에 대 한 고객 키 기능을 사용 하기 위해 적절 한 라이선스를 적용 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p135">If the string BPOS_S_EquivioAnalytics exists, then the mailbox is properly licensed. If not, you must apply the proper license in order to use the Customer Key feature for this mailbox.</span></span>
  
## <a name="can-i-enable-customer-key-for-a-trial-subscription"></a><span data-ttu-id="3acc6-281">평가판 구독에 대해 고객 키를 사용 하도록 설정할 수 있습니까?</span><span class="sxs-lookup"><span data-stu-id="3acc6-281">Can I enable Customer Key for a trial subscription?</span></span>
<span data-ttu-id="3acc6-282"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-282"></span></span>

<span data-ttu-id="3acc6-p136">아니요. 정의에 따라 평가판 구독은 수명이 제한 됩니다. 평가판 구독에서 호스트 되는 암호화 키는 평가판 수명 종료 시 손실 될 수 있습니다. Microsoft는 고객이 중요 한 고객 데이터를 평가판 구독에 저장 하는 것을 허용 하거나 방지할 수 없기 때문에, 평가판 구독과 함께 고객 키를 사용 하는 것은 금지 됩니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p136">No. By definition, trial subscriptions have a limited lifetime. Encryption keys that are hosted in trial subscriptions can be lost at the end of the trial lifetime. Because Microsoft cannot and does not prevent customers from putting important customer data in trial subscriptions, the use of Customer Key with trial subscriptions is prohibited.</span></span>
  
## <a name="how-much-will-using-customer-key-cost"></a><span data-ttu-id="3acc6-287">고객 주요 비용을 얼마나 많이 사용 하나요?</span><span class="sxs-lookup"><span data-stu-id="3acc6-287">How much will using Customer Key cost?</span></span>
<span data-ttu-id="3acc6-288"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-288"></span></span>

<span data-ttu-id="3acc6-p137">고객 키에 필요한 라이선스 외에도, 고객은 키 자격 증명 사용에 대 한 비용을 초래 하 게 됩니다. [Azure Key Vault 가격 세부 정보](https://azure.microsoft.com/en-us/pricing/details/key-vault/) 비용 모델을 기술 하 고 예측을 지원 합니다. 사용 패턴이 다르기 때문에 고객에 게 발생 하는 정확한 비용을 예측할 수 있는 방법은 없습니다. 이 비용은 비용이 매우 낮고, 일반적으로 매달 사용자 당 $0.005의 범위와 HSM에서 지 원하는 키 비용을 더한 것을 보여 줍니다. 이 비용은 고객이 선택한 로깅 구성과 azure 키 자격 증명 모음 로그에 사용 되는 azure 저장소의 크기에 따라 달라 집니다.</span><span class="sxs-lookup"><span data-stu-id="3acc6-p137">In addition to the licensing required for Customer Key, customers will incur a cost for Key Vault usage. [Azure Key Vault pricing details](https://azure.microsoft.com/en-us/pricing/details/key-vault/) describes the cost model and will assist with estimating. There is no way to predict the exact cost that any customer will incur because usage patterns vary. Experience has shown that the cost is very low and generally falls within the range of $0.002 to $0.005 per user per month plus the cost of HSM-backed keys. The cost will also vary according to the logging configuration chosen by the customer and the amount of Azure storage used for Azure Key Vault logs.</span></span> 
  
## <a name="for-more-information"></a><span data-ttu-id="3acc6-294">자세한 내용</span><span class="sxs-lookup"><span data-stu-id="3acc6-294">For more information</span></span>
<span data-ttu-id="3acc6-295"><a name="DiffCustomerKeyandBYOKAzureIP"> </a></span><span class="sxs-lookup"><span data-stu-id="3acc6-295"></span></span>

<span data-ttu-id="3acc6-296">고객 키를 시작 하려면 [Office 365에서 고객 키를 사용 하 여 데이터 제어](controlling-your-data-using-customer-key.md)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="3acc6-296">To get started with Customer Key, see [Controlling your data in Office 365 using Customer Key](controlling-your-data-using-customer-key.md).</span></span>
  

